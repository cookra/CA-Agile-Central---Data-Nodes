<!DOCTYPE html>
<html>
<head>
    <title>nodes</title>

    <script type="text/javascript" src="/apps/2.1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                (function(undefined){"use strict";var __instances={},sigma=function(conf){var i,l,a,c,o,id;sigma.classes.dispatcher.extend(this);var _self=this,_conf=conf||{};if("string"==typeof _conf||_conf instanceof HTMLElement?_conf={renderers:[_conf]}:"[object Array]"===Object.prototype.toString.call(_conf)&&(_conf={renderers:_conf}),o=_conf.renderers||_conf.renderer||_conf.container,_conf.renderers&&0!==_conf.renderers.length||("string"==typeof o||o instanceof HTMLElement||"object"==typeof o&&"container"in o)&&(_conf.renderers=[o]),_conf.id){if(__instances[_conf.id])throw'sigma: Instance "'+_conf.id+'" already exists.';Object.defineProperty(this,"id",{value:_conf.id})}else{for(id=0;__instances[id];)id++;Object.defineProperty(this,"id",{value:""+id})}for(__instances[this.id]=this,this.settings=new sigma.classes.configurable(sigma.settings,_conf.settings||{}),Object.defineProperty(this,"graph",{value:new sigma.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var k,data={};for(k in e.data)data[k]=e.data[k];data.renderer=e.target,this.dispatchEvent(e.type,data)}.bind(this),a=_conf.renderers||[],i=0,l=a.length;i<l;i++)this.addRenderer(a[i]);for(a=_conf.middlewares||[],i=0,l=a.length;i<l;i++)this.middlewares.push("string"==typeof a[i]?sigma.middlewares[a[i]]:a[i]);"object"==typeof _conf.graph&&_conf.graph&&(this.graph.read(_conf.graph),this.refresh()),window.addEventListener("resize",function(){_self.settings&&_self.refresh()})};if(sigma.prototype.addCamera=function(id){var self=this,camera;if(!arguments.length){for(id=0;this.cameras[""+id];)id++;id=""+id}if(this.cameras[id])throw'sigma.addCamera: The camera "'+id+'" already exists.';return camera=new sigma.classes.camera(id,this.graph,this.settings),this.cameras[id]=camera,camera.quadtree=new sigma.classes.quad,sigma.classes.edgequad!==undefined&&(camera.edgequadtree=new sigma.classes.edgequad),camera.bind("coordinatesUpdated",function(e){self.renderCamera(camera,camera.isAnimated)}),this.renderersPerCamera[id]=[],camera},sigma.prototype.killCamera=function(v){if(v="string"==typeof v?this.cameras[v]:v,!v)throw"sigma.killCamera: The camera is undefined.";var i,l,a=this.renderersPerCamera[v.id];for(l=a.length,i=l-1;i>=0;i--)this.killRenderer(a[i]);return delete this.renderersPerCamera[v.id],delete this.cameraFrames[v.id],delete this.cameras[v.id],v.kill&&v.kill(),this},sigma.prototype.addRenderer=function(options){var id,fn,camera,renderer,o=options||{};if("string"==typeof o?o={container:document.getElementById(o)}:o instanceof HTMLElement&&(o={container:o}),"string"==typeof o.container&&(o.container=document.getElementById(o.container)),"id"in o)id=o.id;else{for(id=0;this.renderers[""+id];)id++;id=""+id}if(this.renderers[id])throw'sigma.addRenderer: The renderer "'+id+'" already exists.';if(fn="function"==typeof o.type?o.type:sigma.renderers[o.type],fn=fn||sigma.renderers.def,camera="camera"in o?o.camera instanceof sigma.classes.camera?o.camera:this.cameras[o.camera]||this.addCamera(o.camera):this.addCamera(),this.cameras[camera.id]!==camera)throw"sigma.addRenderer: The camera is not properly referenced.";return renderer=new fn(this.graph,camera,this.settings,o),this.renderers[id]=renderer,Object.defineProperty(renderer,"id",{value:id}),renderer.bind&&renderer.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[camera.id].push(renderer),renderer},sigma.prototype.killRenderer=function(v){if(v="string"==typeof v?this.renderers[v]:v,!v)throw"sigma.killRenderer: The renderer is undefined.";var a=this.renderersPerCamera[v.camera.id],i=a.indexOf(v);return i>=0&&a.splice(i,1),v.kill&&v.kill(),delete this.renderers[v.id],this},sigma.prototype.refresh=function(options){var i,l,k,a,c,bounds,prefix=0;for(options=options||{},a=this.middlewares||[],i=0,l=a.length;i<l;i++)a[i].call(this,0===i?"":"tmp"+prefix+":",i===l-1?"ready:":"tmp"+ ++prefix+":");for(k in this.cameras)c=this.cameras[k],c.settings("autoRescale")&&this.renderersPerCamera[c.id]&&this.renderersPerCamera[c.id].length?sigma.middlewares.rescale.call(this,a.length?"ready:":"",c.readPrefix,{width:this.renderersPerCamera[c.id][0].width,height:this.renderersPerCamera[c.id][0].height}):sigma.middlewares.copy.call(this,a.length?"ready:":"",c.readPrefix),options.skipIndexation||(bounds=sigma.utils.getBoundaries(this.graph,c.readPrefix),c.quadtree.index(this.graph.nodes(),{prefix:c.readPrefix,bounds:{x:bounds.minX,y:bounds.minY,width:bounds.maxX-bounds.minX,height:bounds.maxY-bounds.minY}}),c.edgequadtree!==undefined&&c.settings("drawEdges")&&c.settings("enableEdgeHovering")&&c.edgequadtree.index(this.graph,{prefix:c.readPrefix,bounds:{x:bounds.minX,y:bounds.minY,width:bounds.maxX-bounds.minX,height:bounds.maxY-bounds.minY}}));for(a=Object.keys(this.renderers),i=0,l=a.length;i<l;i++)if(this.renderers[a[i]].process)if(this.settings("skipErrors"))try{this.renderers[a[i]].process()}catch(e){console.log('Warning: The renderer "'+a[i]+'" crashed on ".process()"')}else this.renderers[a[i]].process();return this.render(),this},sigma.prototype.render=function(){var i,l,a,prefix=0;for(a=Object.keys(this.renderers),i=0,l=a.length;i<l;i++)if(this.settings("skipErrors"))try{this.renderers[a[i]].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+a[i]+'" crashed on ".render()"')}else this.renderers[a[i]].render();return this},sigma.prototype.renderCamera=function(camera,force){var i,l,a,self=this;if(force)for(a=this.renderersPerCamera[camera.id],i=0,l=a.length;i<l;i++)if(this.settings("skipErrors"))try{a[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+a[i].id+'" crashed on ".render()"')}else a[i].render();else if(!this.cameraFrames[camera.id]){for(a=this.renderersPerCamera[camera.id],i=0,l=a.length;i<l;i++)if(this.settings("skipErrors"))try{a[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+a[i].id+'" crashed on ".render()"')}else a[i].render();this.cameraFrames[camera.id]=requestAnimationFrame(function(){delete self.cameraFrames[camera.id]})}return this},sigma.prototype.kill=function(){var k;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(k in this.renderers)this.killRenderer(this.renderers[k]);for(k in this.cameras)this.killCamera(this.cameras[k]);delete this.renderers,delete this.cameras;for(k in this)this.hasOwnProperty(k)&&delete this[k];delete __instances[this.id]},sigma.instances=function(id){return arguments.length?__instances[id]:sigma.utils.extend({},__instances)},sigma.version="1.2.0","undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=sigma}).call(this);
                !function(global){"use strict";function _bind(events,handler){var i,i_end,event,eArray;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(events in arguments[0])_bind(events,arguments[0][events]);else if(arguments.length>1)for(eArray=Array.isArray(events)?events:events.split(/ /),i=0,i_end=eArray.length;i!==i_end;i+=1)event=eArray[i],_handlers[event]||(_handlers[event]=[]),_handlers[event].push({handler:handler})}function _unbind(events,handler){var i,i_end,j,j_end,a,event,eArray=Array.isArray(events)?events:events.split(/ /);if(arguments.length)if(handler)for(i=0,i_end=eArray.length;i!==i_end;i+=1){if(event=eArray[i],_handlers[event]){for(a=[],j=0,j_end=_handlers[event].length;j!==j_end;j+=1)_handlers[event][j].handler!==handler&&a.push(_handlers[event][j]);_handlers[event]=a}_handlers[event]&&0===_handlers[event].length&&delete _handlers[event]}else for(i=0,i_end=eArray.length;i!==i_end;i+=1)delete _handlers[eArray[i]];else _handlers=Object.create(null)}function _dispatch(events,data){var i,j,i_end,j_end,event,eventName,eArray=Array.isArray(events)?events:events.split(/ /);for(data=void 0===data?{}:data,i=0,i_end=eArray.length;i!==i_end;i+=1)if(eventName=eArray[i],_handlers[eventName])for(event={type:eventName,data:data||{}},j=0,j_end=_handlers[eventName].length;j!==j_end;j+=1)try{_handlers[eventName][j].handler(event)}catch(e){}}function _executeFirstJob(){var i,l,test,kill,pushed=!1,time=__dateNow(),job=_sortedByPriorityJobs.shift();if(test=job.job(),time=__dateNow()-time,job.done++,job.time+=time,job.currentTime+=time,job.weightTime=job.currentTime/(job.weight||1),job.averageTime=job.time/job.done,kill=job.count?job.count<=job.done:!test,!kill){for(i=0,l=_sortedByPriorityJobs.length;i<l;i++)if(_sortedByPriorityJobs[i].weightTime>job.weightTime){_sortedByPriorityJobs.splice(i,0,job),pushed=!0;break}pushed||_sortedByPriorityJobs.push(job)}return kill?job:null}function _activateJob(job){var l=_sortedByPriorityJobs.length;_runningJobs[job.id]=job,job.status="running",l&&(job.weightTime=_sortedByPriorityJobs[l-1].weightTime,job.currentTime=job.weightTime*(job.weight||1)),job.startTime=__dateNow(),_dispatch("jobStarted",__clone(job)),_sortedByPriorityJobs.push(job)}function _loop(){var k,o,l,job,time,deadJob;for(k in _jobs)job=_jobs[k],job.after?_waitingJobs[k]=job:_activateJob(job),delete _jobs[k];for(_isRunning=!!_sortedByPriorityJobs.length;_sortedByPriorityJobs.length&&__dateNow()-_lastFrameTime<_parameters.frameDuration;)if(deadJob=_executeFirstJob()){_killJob(deadJob.id);for(k in _waitingJobs)_waitingJobs[k].after===deadJob.id&&(_activateJob(_waitingJobs[k]),delete _waitingJobs[k])}_isRunning?(_lastFrameTime=__dateNow(),_dispatch("enterFrame"),setTimeout(_loop,0)):_dispatch("stop")}function _addJob(v1,v2){var i,l,o;if(Array.isArray(v1)){for(_noStart=!0,i=0,l=v1.length;i<l;i++)_addJob(v1[i].id,__extend(v1[i],v2));_noStart=!1,_isRunning||(_lastFrameTime=__dateNow(),_dispatch("start"),_loop())}else if("object"==typeof v1)if("string"==typeof v1.id)_addJob(v1.id,v1);else{_noStart=!0;for(i in v1)"function"==typeof v1[i]?_addJob(i,__extend({job:v1[i]},v2)):_addJob(i,__extend(v1[i],v2));_noStart=!1,_isRunning||(_lastFrameTime=__dateNow(),_dispatch("start"),_loop())}else{if("string"!=typeof v1)throw new Error("[conrad.addJob] Wrong arguments.");if(_hasJob(v1))throw new Error('[conrad.addJob] Job with id "'+v1+'" already exists.');if("function"==typeof v2)o={id:v1,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:v2};else{if("object"!=typeof v2)throw new Error("[conrad.addJob] Wrong arguments.");o=__extend({id:v1,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},v2)}_jobs[v1]=o,_dispatch("jobAdded",__clone(o)),_isRunning||_noStart||(_lastFrameTime=__dateNow(),_dispatch("start"),_loop())}return this}function _killJob(v1){var i,l,k,a,job,found=!1;if(Array.isArray(v1))for(i=0,l=v1.length;i<l;i++)_killJob(v1[i]);else{if("string"!=typeof v1)throw new Error("[conrad.killJob] Wrong arguments.");for(a=[_runningJobs,_waitingJobs,_jobs],i=0,l=a.length;i<l;i++)v1 in a[i]&&(job=a[i][v1],_parameters.history&&(job.status="done",_doneJobs.push(job)),_dispatch("jobEnded",__clone(job)),delete a[i][v1],"function"==typeof job.end&&job.end(),found=!0);for(a=_sortedByPriorityJobs,i=0,l=a.length;i<l;i++)if(a[i].id===v1){a.splice(i,1);break}if(!found)throw new Error('[conrad.killJob] Job "'+v1+'" not found.')}return this}function _killAll(){var k,jobs=__extend(_jobs,_runningJobs,_waitingJobs);if(_parameters.history)for(k in jobs)jobs[k].status="done",_doneJobs.push(jobs[k]),"function"==typeof jobs[k].end&&jobs[k].end();return _jobs={},_waitingJobs={},_runningJobs={},_sortedByPriorityJobs=[],_isRunning=!1,this}function _hasJob(id){var job=_jobs[id]||_runningJobs[id]||_waitingJobs[id];return job?__extend(job):null}function _settings(v1,v2){var o;if("string"==typeof a1&&1===arguments.length)return _parameters[a1];o="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(o[a1]=a2);for(var k in o)void 0!==o[k]?_parameters[k]=o[k]:delete _parameters[k];return this}function _getIsRunning(){return _isRunning}function _clearHistory(){return _doneJobs=[],this}function _getStats(v1,v2){var a,k,i,l,stats,pattern,isPatternString;if(!arguments.length){stats=[];for(k in _jobs)stats.push(_jobs[k]);for(k in _waitingJobs)stats.push(_waitingJobs[k]);for(k in _runningJobs)stats.push(_runningJobs[k]);stats=stats.concat(_doneJobs)}if("string"==typeof v1)switch(v1){case"waiting":stats=__objectValues(_waitingJobs);break;case"running":stats=__objectValues(_runningJobs);break;case"done":stats=_doneJobs;break;default:pattern=v1}if(v1 instanceof RegExp&&(pattern=v1),!pattern&&("string"==typeof v2||v2 instanceof RegExp)&&(pattern=v2),pattern){if(isPatternString="string"==typeof pattern,stats instanceof Array)a=stats;else if("object"==typeof stats){a=[];for(k in stats)a=a.concat(stats[k])}else{a=[];for(k in _jobs)a.push(_jobs[k]);for(k in _waitingJobs)a.push(_waitingJobs[k]);for(k in _runningJobs)a.push(_runningJobs[k]);a=a.concat(_doneJobs)}for(stats=[],i=0,l=a.length;i<l;i++)(isPatternString?a[i].id===pattern:a[i].id.match(pattern))&&stats.push(a[i])}return __clone(stats)}function __extend(){var i,k,res={},l=arguments.length;for(i=l-1;i>=0;i--)for(k in arguments[i])res[k]=arguments[i][k];return res}function __clone(item){var result,i,k,l;if(!item)return item;if(Array.isArray(item))for(result=[],i=0,l=item.length;i<l;i++)result.push(__clone(item[i]));else if("object"==typeof item){result={};for(i in item)result[i]=__clone(item[i])}else result=item;return result}function __objectValues(o){var k,a=[];for(k in o)a.push(o[k]);return a}function __dateNow(){return Date.now?Date.now():(new Date).getTime()}if(global.conrad)throw new Error("conrad already exists");var _lastFrameTime,_isRunning=!1,_jobs={},_runningJobs={},_sortedByPriorityJobs=[],_waitingJobs={},_doneJobs=[],_noStart=!1,_parameters={frameDuration:20,history:!0},_handlers=Object.create(null);Array.isArray||(Array.isArray=function(v){return"[object Array]"===Object.prototype.toString.call(v)});var conrad={hasJob:_hasJob,addJob:_addJob,killJob:_killJob,killAll:_killAll,settings:_settings,getStats:_getStats,isRunning:_getIsRunning,clearHistory:_clearHistory,bind:_bind,unbind:_unbind,version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=conrad),exports.conrad=conrad),global.conrad=conrad}(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var _root=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var i,k,res={},l=arguments.length;for(i=l-1;i>=0;i--)for(k in arguments[i])res[k]=arguments[i][k];return res},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(pkgName){return(pkgName||"").split(".").reduce(function(context,objName){return objName in context?context[objName]:context[objName]={}},_root)},sigma.utils.id=function(){var i=0;return function(){return++i}}();var floatColorCache={};sigma.utils.floatColor=function(val){if(floatColorCache[val])return floatColorCache[val];var original=val,r=0,g=0,b=0;"#"===val[0]?(val=val.slice(1),3===val.length?(r=parseInt(val.charAt(0)+val.charAt(0),16),g=parseInt(val.charAt(1)+val.charAt(1),16),b=parseInt(val.charAt(2)+val.charAt(2),16)):(r=parseInt(val.charAt(0)+val.charAt(1),16),g=parseInt(val.charAt(2)+val.charAt(3),16),b=parseInt(val.charAt(4)+val.charAt(5),16))):val.match(/^ *rgba? *\(/)&&(val=val.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),r=+val[1],g=+val[2],b=+val[3]);var color=256*r*256+256*g+b;return floatColorCache[original]=color,color},sigma.utils.zoomTo=function(camera,x,y,ratio,animation){var settings=camera.settings,count,newRatio,animationSettings,coordinates;newRatio=Math.max(settings("zoomMin"),Math.min(settings("zoomMax"),camera.ratio*ratio)),newRatio!==camera.ratio&&(ratio=newRatio/camera.ratio,coordinates={x:x*(1-ratio)+camera.x,y:y*(1-ratio)+camera.y,ratio:newRatio},animation&&animation.duration?(count=sigma.misc.animation.killAll(camera),animation=sigma.utils.extend(animation,{easing:count?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(camera,coordinates,animation)):(camera.goTo(coordinates),animation&&animation.onComplete&&animation.onComplete()))},sigma.utils.getQuadraticControlPoint=function(x1,y1,x2,y2){return{x:(x1+x2)/2+(y2-y1)/4,y:(y1+y2)/2+(x1-x2)/4}},sigma.utils.getPointOnQuadraticCurve=function(t,x1,y1,x2,y2,xi,yi){return{x:Math.pow(1-t,2)*x1+2*(1-t)*t*xi+Math.pow(t,2)*x2,y:Math.pow(1-t,2)*y1+2*(1-t)*t*yi+Math.pow(t,2)*y2}},sigma.utils.getPointOnBezierCurve=function(t,x1,y1,x2,y2,cx,cy,dx,dy){var B0_t=Math.pow(1-t,3),B1_t=3*t*Math.pow(1-t,2),B2_t=3*Math.pow(t,2)*(1-t),B3_t=Math.pow(t,3);return{x:B0_t*x1+B1_t*cx+B2_t*dx+B3_t*x2,y:B0_t*y1+B1_t*cy+B2_t*dy+B3_t*y2}},sigma.utils.getSelfLoopControlPoints=function(x,y,size){return{x1:x-7*size,y1:y,x2:x,y2:y+7*size}},sigma.utils.getDistance=function(x0,y0,x1,y1){return Math.sqrt(Math.pow(x1-x0,2)+Math.pow(y1-y0,2))},sigma.utils.getCircleIntersection=function(x0,y0,r0,x1,y1,r1){var a,dx,dy,d,h,rx,ry,x2,y2;if(dx=x1-x0,dy=y1-y0,d=Math.sqrt(dy*dy+dx*dx),d>r0+r1)return!1;if(d<Math.abs(r0-r1))return!1;a=(r0*r0-r1*r1+d*d)/(2*d),x2=x0+dx*a/d,y2=y0+dy*a/d,h=Math.sqrt(r0*r0-a*a),rx=-dy*(h/d),ry=dx*(h/d);var xi=x2+rx,xi_prime=x2-rx,yi=y2+ry,yi_prime=y2-ry;return{xi:xi,xi_prime:xi_prime,yi:yi,yi_prime:yi_prime}},sigma.utils.isPointOnSegment=function(x,y,x1,y1,x2,y2,epsilon){var crossProduct=Math.abs((y-y1)*(x2-x1)-(x-x1)*(y2-y1)),d=sigma.utils.getDistance(x1,y1,x2,y2),nCrossProduct=crossProduct/d;return nCrossProduct<epsilon&&Math.min(x1,x2)<=x&&x<=Math.max(x1,x2)&&Math.min(y1,y2)<=y&&y<=Math.max(y1,y2)},sigma.utils.isPointOnQuadraticCurve=function(x,y,x1,y1,x2,y2,cpx,cpy,epsilon){var dP1P2=sigma.utils.getDistance(x1,y1,x2,y2);if(Math.abs(x-x1)>dP1P2||Math.abs(y-y1)>dP1P2)return!1;for(var dP1=sigma.utils.getDistance(x,y,x1,y1),dP2=sigma.utils.getDistance(x,y,x2,y2),t=.5,r=dP1<dP2?-.01:.01,rThreshold=.001,i=100,pt=sigma.utils.getPointOnQuadraticCurve(t,x1,y1,x2,y2,cpx,cpy),dt=sigma.utils.getDistance(x,y,pt.x,pt.y),old_dt;i-- >0&&t>=0&&t<=1&&dt>epsilon&&(r>rThreshold||r<-rThreshold);)old_dt=dt,pt=sigma.utils.getPointOnQuadraticCurve(t,x1,y1,x2,y2,cpx,cpy),dt=sigma.utils.getDistance(x,y,pt.x,pt.y),dt>old_dt?(r=-r/2,t+=r):t+r<0||t+r>1?(r/=2,dt=old_dt):t+=r;return dt<epsilon},sigma.utils.isPointOnBezierCurve=function(x,y,x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2,epsilon){var dP1CP1=sigma.utils.getDistance(x1,y1,cpx1,cpy1);if(Math.abs(x-x1)>dP1CP1||Math.abs(y-y1)>dP1CP1)return!1;for(var dP1=sigma.utils.getDistance(x,y,x1,y1),dP2=sigma.utils.getDistance(x,y,x2,y2),t=.5,r=dP1<dP2?-.01:.01,rThreshold=.001,i=100,pt=sigma.utils.getPointOnBezierCurve(t,x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2),dt=sigma.utils.getDistance(x,y,pt.x,pt.y),old_dt;i-- >0&&t>=0&&t<=1&&dt>epsilon&&(r>rThreshold||r<-rThreshold);)old_dt=dt,pt=sigma.utils.getPointOnBezierCurve(t,x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2),dt=sigma.utils.getDistance(x,y,pt.x,pt.y),dt>old_dt?(r=-r/2,t+=r):t+r<0||t+r>1?(r/=2,dt=old_dt):t+=r;return dt<epsilon},sigma.utils.getX=function(e){return e.offsetX!==undefined&&e.offsetX||e.layerX!==undefined&&e.layerX||e.clientX!==undefined&&e.clientX},sigma.utils.getY=function(e){return e.offsetY!==undefined&&e.offsetY||e.layerY!==undefined&&e.layerY||e.clientY!==undefined&&e.clientY},sigma.utils.getPixelRatio=function(){var ratio=1;return window.screen.deviceXDPI!==undefined&&window.screen.logicalXDPI!==undefined&&window.screen.deviceXDPI>window.screen.logicalXDPI?ratio=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==undefined&&(ratio=window.devicePixelRatio),ratio},sigma.utils.getWidth=function(e){var w=e.target.ownerSVGElement?e.target.ownerSVGElement.width:e.target.width;return"number"==typeof w&&w||w!==undefined&&w.baseVal!==undefined&&w.baseVal.value},sigma.utils.getCenter=function(e){var ratio=e.target.namespaceURI.indexOf("svg")!==-1?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(e)/(2*ratio),y:sigma.utils.getHeight(e)/(2*ratio)}},sigma.utils.mouseCoords=function(e,x,y){return x=x||sigma.utils.getX(e),y=y||sigma.utils.getY(e),{x:x-sigma.utils.getCenter(e).x,y:y-sigma.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},sigma.utils.getHeight=function(e){var h=e.target.ownerSVGElement?e.target.ownerSVGElement.height:e.target.height;return"number"==typeof h&&h||h!==undefined&&h.baseVal!==undefined&&h.baseVal.value},sigma.utils.getDelta=function(e){return e.wheelDelta!==undefined&&e.wheelDelta||e.detail!==undefined&&-e.detail},sigma.utils.getOffset=function(dom){for(var left=0,top=0;dom;)top+=parseInt(dom.offsetTop),left+=parseInt(dom.offsetLeft),dom=dom.offsetParent;return{top:top,left:left}},sigma.utils.doubleClick=function(target,type,callback){var clicks=0,self=this,handlers;target._doubleClickHandler=target._doubleClickHandler||{},target._doubleClickHandler[type]=target._doubleClickHandler[type]||[],handlers=target._doubleClickHandler[type],handlers.push(function(e){return clicks++,2===clicks?(clicks=0,callback(e)):void(1===clicks&&setTimeout(function(){clicks=0},sigma.settings.doubleClickTimeout))}),target.addEventListener(type,handlers[handlers.length-1],!1)},sigma.utils.unbindDoubleClick=function(target,type){for(var handler,handlers=(target._doubleClickHandler||{})[type]||[];handler=handlers.pop();)target.removeEventListener(type,handler);delete(target._doubleClickHandler||{})[type]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(k){return k},sigma.utils.easings.quadraticIn=function(k){return k*k},sigma.utils.easings.quadraticOut=function(k){return k*(2-k)},sigma.utils.easings.quadraticInOut=function(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1)},sigma.utils.easings.cubicIn=function(k){return k*k*k},sigma.utils.easings.cubicOut=function(k){return--k*k*k+1},sigma.utils.easings.cubicInOut=function(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2)},sigma.utils.loadShader=function(gl,shaderSource,shaderType,error){var compiled,shader=gl.createShader(shaderType);return gl.shaderSource(shader,shaderSource),gl.compileShader(shader),compiled=gl.getShaderParameter(shader,gl.COMPILE_STATUS),compiled?shader:(error&&error('Error compiling shader "'+shader+'":'+gl.getShaderInfoLog(shader)),gl.deleteShader(shader),null)},sigma.utils.loadProgram=function(gl,shaders,attribs,loc,error){var i,linked,program=gl.createProgram();for(i=0;i<shaders.length;++i)gl.attachShader(program,shaders[i]);if(attribs)for(i=0;i<attribs.length;++i)gl.bindAttribLocation(program,locations?locations[i]:i,opt_attribs[i]);return gl.linkProgram(program),linked=gl.getProgramParameter(program,gl.LINK_STATUS),linked?program:(error&&error("Error in program linking: "+gl.getProgramInfoLog(program)),gl.deleteProgram(program),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(dx,dy){return[1,0,0,0,1,0,dx,dy,1]},sigma.utils.matrices.rotation=function(angle,m2){var cos=Math.cos(angle),sin=Math.sin(angle);return m2?[cos,-sin,sin,cos]:[cos,-sin,0,sin,cos,0,0,0,1]},sigma.utils.matrices.scale=function(ratio,m2){return m2?[ratio,0,0,ratio]:[ratio,0,0,0,ratio,0,0,0,1]},sigma.utils.matrices.multiply=function(a,b,m2){var l=m2?2:3,a00=a[0*l+0],a01=a[0*l+1],a02=a[0*l+2],a10=a[1*l+0],a11=a[1*l+1],a12=a[1*l+2],a20=a[2*l+0],a21=a[2*l+1],a22=a[2*l+2],b00=b[0*l+0],b01=b[0*l+1],b02=b[0*l+2],b10=b[1*l+0],b11=b[1*l+1],b12=b[1*l+2],b20=b[2*l+0],b21=b[2*l+1],b22=b[2*l+2];return m2?[a00*b00+a01*b10,a00*b01+a01*b11,a10*b00+a11*b10,a10*b01+a11*b11]:[a00*b00+a01*b10+a02*b20,a00*b01+a01*b11+a02*b21,a00*b02+a01*b12+a02*b22,a10*b00+a11*b10+a12*b20,a10*b01+a11*b11+a12*b21,a10*b02+a11*b12+a12*b22,a20*b00+a21*b10+a22*b20,a20*b01+a21*b11+a22*b21,a20*b02+a21*b12+a22*b22]}}).call(this);
                !function(global){"use strict";var x,lastTime=0,vendors=["ms","moz","webkit","o"];for(x=0;x<vendors.length&&!global.requestAnimationFrame;x++)global.requestAnimationFrame=global[vendors[x]+"RequestAnimationFrame"],global.cancelAnimationFrame=global[vendors[x]+"CancelAnimationFrame"]||global[vendors[x]+"CancelRequestAnimationFrame"];global.requestAnimationFrame||(global.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=global.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),global.cancelAnimationFrame||(global.cancelAnimationFrame=function(id){clearTimeout(id)}),Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP,fBound;return fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))},fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound})}(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var settings={clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},settings)}).call(this);
                (function(){"use strict";var dispatcher=function(){Object.defineProperty(this,"_handlers",{value:{}})};dispatcher.prototype.bind=function(events,handler){var i,l,event,eArray;if(1===arguments.length&&"object"==typeof arguments[0])for(events in arguments[0])this.bind(events,arguments[0][events]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(eArray="string"==typeof events?events.split(" "):events,i=0,l=eArray.length;i!==l;i+=1)event=eArray[i],event&&(this._handlers[event]||(this._handlers[event]=[]),this._handlers[event].push({handler:handler}))}return this},dispatcher.prototype.unbind=function(events,handler){var i,n,j,m,k,a,event,eArray="string"==typeof events?events.split(" "):events;if(!arguments.length){for(k in this._handlers)delete this._handlers[k];return this}if(handler)for(i=0,n=eArray.length;i!==n;i+=1){if(event=eArray[i],this._handlers[event]){for(a=[],j=0,m=this._handlers[event].length;j!==m;j+=1)this._handlers[event][j].handler!==handler&&a.push(this._handlers[event][j]);this._handlers[event]=a}this._handlers[event]&&0===this._handlers[event].length&&delete this._handlers[event]}else for(i=0,n=eArray.length;i!==n;i+=1)delete this._handlers[eArray[i]];return this},dispatcher.prototype.dispatchEvent=function(events,data){var i,n,j,m,a,event,eventName,self=this,eArray="string"==typeof events?events.split(" "):events;for(data=void 0===data?{}:data,i=0,n=eArray.length;i!==n;i+=1)if(eventName=eArray[i],this._handlers[eventName]){for(event=self.getEvent(eventName,data),a=[],j=0,m=this._handlers[eventName].length;j!==m;j+=1)this._handlers[eventName][j].handler(event),this._handlers[eventName][j].one||a.push(this._handlers[eventName][j]);this._handlers[eventName]=a}return this},dispatcher.prototype.getEvent=function(event,data){return{type:event,data:data||{},target:this}},dispatcher.extend=function(target,args){var k;for(k in dispatcher.prototype)dispatcher.prototype.hasOwnProperty(k)&&(target[k]=dispatcher.prototype[k]);dispatcher.apply(target,args)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=dispatcher):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=dispatcher),exports.dispatcher=dispatcher):this.dispatcher=dispatcher}).call(this);
                (function(){"use strict";var configurable=function(){var i,l,data={},datas=Array.prototype.slice.call(arguments,0),settings=function(a1,a2){var o,i,l,k;{if(1!==arguments.length||"string"!=typeof a1){if("object"==typeof a1&&"string"==typeof a2)return void 0!==(a1||{})[a2]?a1[a2]:settings(a2);for(o="object"==typeof a1&&void 0===a2?a1:{},"string"==typeof a1&&(o[a1]=a2),i=0,k=Object.keys(o),l=k.length;i<l;i++)data[k[i]]=o[k[i]];return this}if(void 0!==data[a1])return data[a1];for(i=0,l=datas.length;i<l;i++)if(void 0!==datas[i][a1])return datas[i][a1]}};for(settings.embedObjects=function(){var args=datas.concat(data).concat(Array.prototype.splice.call(arguments,0));return configurable.apply({},args)},i=0,l=arguments.length;i<l;i++)settings(arguments[i]);return settings};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=configurable):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=configurable),exports.configurable=configurable):this.configurable=configurable}).call(this);
                (function(undefined){"use strict";function __bindGraphMethod(methodName,scope,fn){var result=function(){var k,res;for(k in _methodBeforeBindings[methodName])_methodBeforeBindings[methodName][k].apply(scope,arguments);res=fn.apply(scope,arguments);for(k in _methodBindings[methodName])_methodBindings[methodName][k].apply(scope,arguments);return res};return result}function __emptyObject(obj){var k;for(k in obj)"hasOwnProperty"in obj&&!obj.hasOwnProperty(k)||delete obj[k];return obj}var _methods=Object.create(null),_indexes=Object.create(null),_initBindings=Object.create(null),_methodBindings=Object.create(null),_methodBeforeBindings=Object.create(null),_defaultSettings={immutable:!0,clone:!0},_defaultSettingsFunction=function(key){return _defaultSettings[key]},graph=function(settings){var k,fn,data;data={settings:settings||_defaultSettingsFunction,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(k in _initBindings)_initBindings[k].call(data);for(k in _methods)fn=__bindGraphMethod(k,data,_methods[k]),this[k]=fn,data[k]=fn};graph.addMethod=function(methodName,fn){if("string"!=typeof methodName||"function"!=typeof fn||2!==arguments.length)throw"addMethod: Wrong arguments.";if(_methods[methodName]||graph[methodName])throw'The method "'+methodName+'" already exists.';return _methods[methodName]=fn,_methodBindings[methodName]=Object.create(null),_methodBeforeBindings[methodName]=Object.create(null),this},graph.hasMethod=function(methodName){return!(!_methods[methodName]&&!graph[methodName])},graph.attach=function(methodName,key,fn,before){if("string"!=typeof methodName||"string"!=typeof key||"function"!=typeof fn||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var bindings;if("constructor"===methodName)bindings=_initBindings;else if(before){if(!_methodBeforeBindings[methodName])throw'The method "'+methodName+'" does not exist.';bindings=_methodBeforeBindings[methodName]}else{if(!_methodBindings[methodName])throw'The method "'+methodName+'" does not exist.';bindings=_methodBindings[methodName]}if(bindings[key])throw'A function "'+key+'" is already attached to the method "'+methodName+'".';return bindings[key]=fn,this},graph.attachBefore=function(methodName,key,fn){return this.attach(methodName,key,fn,!0)},graph.addIndex=function(name,bindings){if("string"!=typeof name||Object(bindings)!==bindings||2!==arguments.length)throw"addIndex: Wrong arguments.";if(_indexes[name])throw'The index "'+name+'" already exists.';var k;_indexes[name]=bindings;for(k in bindings){if("function"!=typeof bindings[k])throw"The bindings must be functions.";graph.attach(k,name,bindings[k])}return this},graph.addMethod("addNode",function(node){if(Object(node)!==node||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof node.id&&"number"!=typeof node.id)throw"The node must have a string or number id.";if(this.nodesIndex[node.id])throw'The node "'+node.id+'" already exists.';var k,id=node.id,validNode=Object.create(null);if(this.settings("clone"))for(k in node)"id"!==k&&(validNode[k]=node[k]);else validNode=node;return this.settings("immutable")?Object.defineProperty(validNode,"id",{value:id,enumerable:!0}):validNode.id=id,this.inNeighborsIndex[id]=Object.create(null),this.outNeighborsIndex[id]=Object.create(null),this.allNeighborsIndex[id]=Object.create(null),this.inNeighborsCount[id]=0,this.outNeighborsCount[id]=0,this.allNeighborsCount[id]=0,this.nodesArray.push(validNode),this.nodesIndex[validNode.id]=validNode,this}),graph.addMethod("addEdge",function(edge){if(Object(edge)!==edge||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof edge.id&&"number"!=typeof edge.id)throw"The edge must have a string or number id.";if("string"!=typeof edge.source&&"number"!=typeof edge.source||!this.nodesIndex[edge.source])throw"The edge source must have an existing node id.";if("string"!=typeof edge.target&&"number"!=typeof edge.target||!this.nodesIndex[edge.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[edge.id])throw'The edge "'+edge.id+'" already exists.';var k,validEdge=Object.create(null);if(this.settings("clone"))for(k in edge)"id"!==k&&"source"!==k&&"target"!==k&&(validEdge[k]=edge[k]);else validEdge=edge;return this.settings("immutable")?(Object.defineProperty(validEdge,"id",{value:edge.id,enumerable:!0}),Object.defineProperty(validEdge,"source",{value:edge.source,enumerable:!0}),Object.defineProperty(validEdge,"target",{value:edge.target,enumerable:!0})):(validEdge.id=edge.id,validEdge.source=edge.source,validEdge.target=edge.target),this.edgesArray.push(validEdge),this.edgesIndex[validEdge.id]=validEdge,this.inNeighborsIndex[validEdge.target][validEdge.source]||(this.inNeighborsIndex[validEdge.target][validEdge.source]=Object.create(null)),this.inNeighborsIndex[validEdge.target][validEdge.source][validEdge.id]=validEdge,this.outNeighborsIndex[validEdge.source][validEdge.target]||(this.outNeighborsIndex[validEdge.source][validEdge.target]=Object.create(null)),this.outNeighborsIndex[validEdge.source][validEdge.target][validEdge.id]=validEdge,this.allNeighborsIndex[validEdge.source][validEdge.target]||(this.allNeighborsIndex[validEdge.source][validEdge.target]=Object.create(null)),this.allNeighborsIndex[validEdge.source][validEdge.target][validEdge.id]=validEdge,validEdge.target!==validEdge.source&&(this.allNeighborsIndex[validEdge.target][validEdge.source]||(this.allNeighborsIndex[validEdge.target][validEdge.source]=Object.create(null)),this.allNeighborsIndex[validEdge.target][validEdge.source][validEdge.id]=validEdge),this.inNeighborsCount[validEdge.target]++,this.outNeighborsCount[validEdge.source]++,this.allNeighborsCount[validEdge.target]++,this.allNeighborsCount[validEdge.source]++,this}),graph.addMethod("dropNode",function(id){if("string"!=typeof id&&"number"!=typeof id||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[id])throw'The node "'+id+'" does not exist.';var i,k,l;for(delete this.nodesIndex[id],i=0,l=this.nodesArray.length;i<l;i++)if(this.nodesArray[i].id===id){this.nodesArray.splice(i,1);break}for(i=this.edgesArray.length-1;i>=0;i--)this.edgesArray[i].source!==id&&this.edgesArray[i].target!==id||this.dropEdge(this.edgesArray[i].id);delete this.inNeighborsIndex[id],delete this.outNeighborsIndex[id],delete this.allNeighborsIndex[id],delete this.inNeighborsCount[id],delete this.outNeighborsCount[id],delete this.allNeighborsCount[id];for(k in this.nodesIndex)delete this.inNeighborsIndex[k][id],delete this.outNeighborsIndex[k][id],delete this.allNeighborsIndex[k][id];return this}),graph.addMethod("dropEdge",function(id){if("string"!=typeof id&&"number"!=typeof id||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[id])throw'The edge "'+id+'" does not exist.';var i,l,edge;for(edge=this.edgesIndex[id],delete this.edgesIndex[id],i=0,l=this.edgesArray.length;i<l;i++)if(this.edgesArray[i].id===id){this.edgesArray.splice(i,1);break}return delete this.inNeighborsIndex[edge.target][edge.source][edge.id],Object.keys(this.inNeighborsIndex[edge.target][edge.source]).length||delete this.inNeighborsIndex[edge.target][edge.source],delete this.outNeighborsIndex[edge.source][edge.target][edge.id],Object.keys(this.outNeighborsIndex[edge.source][edge.target]).length||delete this.outNeighborsIndex[edge.source][edge.target],delete this.allNeighborsIndex[edge.source][edge.target][edge.id],Object.keys(this.allNeighborsIndex[edge.source][edge.target]).length||delete this.allNeighborsIndex[edge.source][edge.target],edge.target!==edge.source&&(delete this.allNeighborsIndex[edge.target][edge.source][edge.id],Object.keys(this.allNeighborsIndex[edge.target][edge.source]).length||delete this.allNeighborsIndex[edge.target][edge.source]),this.inNeighborsCount[edge.target]--,this.outNeighborsCount[edge.source]--,this.allNeighborsCount[edge.source]--,this.allNeighborsCount[edge.target]--,this}),graph.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),graph.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,__emptyObject(this.nodesIndex),__emptyObject(this.edgesIndex),__emptyObject(this.nodesIndex),__emptyObject(this.inNeighborsIndex),__emptyObject(this.outNeighborsIndex),__emptyObject(this.allNeighborsIndex),__emptyObject(this.inNeighborsCount),__emptyObject(this.outNeighborsCount),__emptyObject(this.allNeighborsCount),this}),graph.addMethod("read",function(g){var i,a,l;for(a=g.nodes||[],i=0,l=a.length;i<l;i++)this.addNode(a[i]);for(a=g.edges||[],i=0,l=a.length;i<l;i++)this.addEdge(a[i]);return this}),graph.addMethod("nodes",function(v){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof v||"number"==typeof v))return this.nodesIndex[v];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(v)){var i,l,a=[];for(i=0,l=v.length;i<l;i++){if("string"!=typeof v[i]&&"number"!=typeof v[i])throw"nodes: Wrong arguments.";a.push(this.nodesIndex[v[i]])}return a}throw"nodes: Wrong arguments."}),graph.addMethod("degree",function(v,which){if(which={in:this.inNeighborsCount,out:this.outNeighborsCount}[which||""]||this.allNeighborsCount,"string"==typeof v||"number"==typeof v)return which[v];if("[object Array]"===Object.prototype.toString.call(v)){var i,l,a=[];for(i=0,l=v.length;i<l;i++){if("string"!=typeof v[i]&&"number"!=typeof v[i])throw"degree: Wrong arguments.";a.push(which[v[i]])}return a}throw"degree: Wrong arguments."}),graph.addMethod("edges",function(v){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof v||"number"==typeof v))return this.edgesIndex[v];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(v)){var i,l,a=[];for(i=0,l=v.length;i<l;i++){if("string"!=typeof v[i]&&"number"!=typeof v[i])throw"edges: Wrong arguments.";a.push(this.edgesIndex[v[i]])}return a}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=graph):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=graph),exports.graph=graph):this.graph=graph}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(id,graph,settings,options){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:graph}),Object.defineProperty(this,"id",{value:id}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+id+":"}),Object.defineProperty(this,"prefix",{value:"cam"+id+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof options&&options?settings.embedObject(options):settings},sigma.classes.camera.prototype.goTo=function(coordinates){if(!this.settings("enableCamera"))return this;var i,l,c=coordinates||{},keys=["x","y","ratio","angle"];for(i=0,l=keys.length;i<l;i++)if(c[keys[i]]!==undefined){if("number"!=typeof c[keys[i]]||isNaN(c[keys[i]]))throw'Value for "'+keys[i]+'" is not a number.';this[keys[i]]=c[keys[i]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(read,write,options){options=options||{},write=write!==undefined?write:this.prefix,read=read!==undefined?read:this.readPrefix;var nodes=options.nodes||this.graph.nodes(),edges=options.edges||this.graph.edges(),i,l,node,relCos=Math.cos(this.angle)/this.ratio,relSin=Math.sin(this.angle)/this.ratio,nodeRatio=Math.pow(this.ratio,this.settings("nodesPowRatio")),edgeRatio=Math.pow(this.ratio,this.settings("edgesPowRatio")),xOffset=(options.width||0)/2-this.x*relCos-this.y*relSin,yOffset=(options.height||0)/2-this.y*relCos+this.x*relSin;for(i=0,l=nodes.length;i<l;i++)node=nodes[i],node[write+"x"]=(node[read+"x"]||0)*relCos+(node[read+"y"]||0)*relSin+xOffset,node[write+"y"]=(node[read+"y"]||0)*relCos-(node[read+"x"]||0)*relSin+yOffset,node[write+"size"]=(node[read+"size"]||0)/nodeRatio;for(i=0,l=edges.length;i<l;i++)edges[i][write+"size"]=(edges[i][read+"size"]||0)/edgeRatio;return this},sigma.classes.camera.prototype.graphPosition=function(x,y,vector){var X=0,Y=0,cos=Math.cos(this.angle),sin=Math.sin(this.angle);return vector||(X=-(this.x*cos+this.y*sin)/this.ratio,Y=-(this.y*cos-this.x*sin)/this.ratio),{x:(x*cos+y*sin)/this.ratio+X,y:(y*cos-x*sin)/this.ratio+Y}},sigma.classes.camera.prototype.cameraPosition=function(x,y,vector){var X=0,Y=0,cos=Math.cos(this.angle),sin=Math.sin(this.angle);return vector||(X=-(this.x*cos+this.y*sin)/this.ratio,Y=-(this.y*cos-this.x*sin)/this.ratio),{x:((x-X)*cos-(y-Y)*sin)*this.ratio,y:((y-Y)*cos+(x-X)*sin)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var scale=sigma.utils.matrices.scale(1/this.ratio),rotation=sigma.utils.matrices.rotation(this.angle),translation=sigma.utils.matrices.translation(-this.x,-this.y),matrix=sigma.utils.matrices.multiply(translation,sigma.utils.matrices.multiply(rotation,scale));return matrix},sigma.classes.camera.prototype.getRectangle=function(width,height){var widthVect=this.cameraPosition(width,0,!0),heightVect=this.cameraPosition(0,height,!0),centerVect=this.cameraPosition(width/2,height/2,!0),marginX=this.cameraPosition(width/4,0,!0).x,marginY=this.cameraPosition(0,height/4,!0).y;return{x1:this.x-centerVect.x-marginX,y1:this.y-centerVect.y-marginY,x2:this.x-centerVect.x+marginX+widthVect.x,y2:this.y-centerVect.y-marginY+widthVect.y,height:Math.sqrt(Math.pow(heightVect.x,2)+Math.pow(heightVect.y+2*marginY,2))}}}).call(this);
                (function(undefined){"use strict";function _quadIndex(point,quadBounds){var xmp=quadBounds.x+quadBounds.width/2,ymp=quadBounds.y+quadBounds.height/2,top=point.y<ymp,left=point.x<xmp;return top?left?0:1:left?2:3}function _quadIndexes(rectangle,quadCorners){for(var indexes=[],i=0;i<4;i++)rectangle.x2>=quadCorners[i][0].x&&rectangle.x1<=quadCorners[i][1].x&&rectangle.y1+rectangle.height>=quadCorners[i][0].y&&rectangle.y1<=quadCorners[i][2].y&&indexes.push(i);return indexes}function _quadCollision(corners,quadCorners){for(var indexes=[],i=0;i<4;i++)_geom.collision(corners,quadCorners[i])&&indexes.push(i);return indexes}function _quadSubdivide(index,quad){var next=quad.level+1,subw=Math.round(quad.bounds.width/2),subh=Math.round(quad.bounds.height/2),qx=Math.round(quad.bounds.x),qy=Math.round(quad.bounds.y),x,y;switch(index){case 0:x=qx,y=qy;break;case 1:x=qx+subw,y=qy;break;case 2:x=qx,y=qy+subh;break;case 3:x=qx+subw,y=qy+subh}return _quadTree({x:x,y:y,width:subw,height:subh},next,quad.maxElements,quad.maxLevel)}function _quadInsert(el,sizedPoint,quad){if(quad.level<quad.maxLevel)for(var indexes=_quadIndexes(sizedPoint,quad.corners),i=0,l=indexes.length;i<l;i++)quad.nodes[indexes[i]]===undefined&&(quad.nodes[indexes[i]]=_quadSubdivide(indexes[i],quad)),_quadInsert(el,sizedPoint,quad.nodes[indexes[i]]);else quad.elements.push(el)}function _quadRetrievePoint(point,quad){if(quad.level<quad.maxLevel){var index=_quadIndex(point,quad.bounds);return quad.nodes[index]!==undefined?_quadRetrievePoint(point,quad.nodes[index]):[]}return quad.elements}function _quadRetrieveArea(rectData,quad,collisionFunc,els){if(els=els||{},quad.level<quad.maxLevel)for(var indexes=collisionFunc(rectData,quad.corners),i=0,l=indexes.length;i<l;i++)quad.nodes[indexes[i]]!==undefined&&_quadRetrieveArea(rectData,quad.nodes[indexes[i]],collisionFunc,els);else for(var j=0,m=quad.elements.length;j<m;j++)els[quad.elements[j].id]===undefined&&(els[quad.elements[j].id]=quad.elements[j]);return els}function _quadTree(bounds,level,maxElements,maxLevel){return{level:level||0,bounds:bounds,corners:_geom.splitSquare(bounds),maxElements:maxElements||20,maxLevel:maxLevel||4,elements:[],nodes:[]}}var _geom={pointToSquare:function(n){return{x1:n.x-n.size,y1:n.y-n.size,x2:n.x+n.size,y2:n.y-n.size,height:2*n.size}},isAxisAligned:function(r){return r.x1===r.x2||r.y1===r.y2},axisAlignedTopPoints:function(r){return r.y1===r.y2&&r.x1<r.x2?r:r.x1===r.x2&&r.y2>r.y1?{x1:r.x1-r.height,y1:r.y1,x2:r.x1,y2:r.y1,height:r.height}:r.x1===r.x2&&r.y2<r.y1?{x1:r.x1,y1:r.y2,x2:r.x2+r.height,y2:r.y2,height:r.height}:{x1:r.x2,y1:r.y1-r.height,x2:r.x1,y2:r.y1-r.height,height:r.height}},lowerLeftCoor:function(r){var width=Math.sqrt(Math.pow(r.x2-r.x1,2)+Math.pow(r.y2-r.y1,2));return{x:r.x1-(r.y2-r.y1)*r.height/width,y:r.y1+(r.x2-r.x1)*r.height/width}},lowerRightCoor:function(r,llc){return{x:llc.x-r.x1+r.x2,y:llc.y-r.y1+r.y2}},rectangleCorners:function(r){var llc=this.lowerLeftCoor(r),lrc=this.lowerRightCoor(r,llc);return[{x:r.x1,y:r.y1},{x:r.x2,y:r.y2},{x:llc.x,y:llc.y},{x:lrc.x,y:lrc.y}]},splitSquare:function(b){return[[{x:b.x,y:b.y},{x:b.x+b.width/2,y:b.y},{x:b.x,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height/2}],[{x:b.x+b.width/2,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x+b.width,y:b.y+b.height/2}],[{x:b.x,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x,y:b.y+b.height},{x:b.x+b.width/2,y:b.y+b.height}],[{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x+b.width,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height},{x:b.x+b.width,y:b.y+b.height}]]},axis:function(c1,c2){return[{x:c1[1].x-c1[0].x,y:c1[1].y-c1[0].y},{x:c1[1].x-c1[3].x,y:c1[1].y-c1[3].y},{x:c2[0].x-c2[2].x,y:c2[0].y-c2[2].y},{x:c2[0].x-c2[1].x,y:c2[0].y-c2[1].y}]},projection:function(c,a){var l=(c.x*a.x+c.y*a.y)/(Math.pow(a.x,2)+Math.pow(a.y,2));return{x:l*a.x,y:l*a.y}},axisCollision:function(a,c1,c2){for(var sc1=[],sc2=[],ci=0;ci<4;ci++){var p1=this.projection(c1[ci],a),p2=this.projection(c2[ci],a);sc1.push(p1.x*a.x+p1.y*a.y),sc2.push(p2.x*a.x+p2.y*a.y)}var maxc1=Math.max.apply(Math,sc1),maxc2=Math.max.apply(Math,sc2),minc1=Math.min.apply(Math,sc1),minc2=Math.min.apply(Math,sc2);return minc2<=maxc1&&maxc2>=minc1},collision:function(c1,c2){for(var axis=this.axis(c1,c2),col=!0,i=0;i<4;i++)col=col&&this.axisCollision(axis[i],c1,c2);return col}},quad=function(){this._geom=_geom,this._tree=null,this._cache={query:!1,result:!1}};quad.prototype.index=function(nodes,params){if(!params.bounds)throw"sigma.classes.quad.index: bounds information not given.";var prefix=params.prefix||"";this._tree=_quadTree(params.bounds,0,params.maxElements,params.maxLevel);for(var i=0,l=nodes.length;i<l;i++)_quadInsert(nodes[i],_geom.pointToSquare({x:nodes[i][prefix+"x"],y:nodes[i][prefix+"y"],size:nodes[i][prefix+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},quad.prototype.point=function(x,y){return this._tree?_quadRetrievePoint({x:x,y:y},this._tree)||[]:[]},quad.prototype.area=function(rect){var serialized=JSON.stringify(rect),collisionFunc,rectData;if(this._cache.query===serialized)return this._cache.result;_geom.isAxisAligned(rect)?(collisionFunc=_quadIndexes,rectData=_geom.axisAlignedTopPoints(rect)):(collisionFunc=_quadCollision,rectData=_geom.rectangleCorners(rect));var nodes=this._tree?_quadRetrieveArea(rectData,this._tree,collisionFunc):[],nodesArray=[];for(var i in nodes)nodesArray.push(nodes[i]);return this._cache.query=serialized,this._cache.result=nodesArray,nodesArray},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=quad):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=quad),exports.quad=quad):this.quad=quad}).call(this);
                (function(undefined){"use strict";function _quadIndex(point,quadBounds){var xmp=quadBounds.x+quadBounds.width/2,ymp=quadBounds.y+quadBounds.height/2,top=point.y<ymp,left=point.x<xmp;return top?left?0:1:left?2:3}function _quadIndexes(rectangle,quadCorners){for(var indexes=[],i=0;i<4;i++)rectangle.x2>=quadCorners[i][0].x&&rectangle.x1<=quadCorners[i][1].x&&rectangle.y1+rectangle.height>=quadCorners[i][0].y&&rectangle.y1<=quadCorners[i][2].y&&indexes.push(i);return indexes}function _quadCollision(corners,quadCorners){for(var indexes=[],i=0;i<4;i++)_geom.collision(corners,quadCorners[i])&&indexes.push(i);return indexes}function _quadSubdivide(index,quad){var next=quad.level+1,subw=Math.round(quad.bounds.width/2),subh=Math.round(quad.bounds.height/2),qx=Math.round(quad.bounds.x),qy=Math.round(quad.bounds.y),x,y;switch(index){case 0:x=qx,y=qy;break;case 1:x=qx+subw,y=qy;break;case 2:x=qx,y=qy+subh;break;case 3:x=qx+subw,y=qy+subh}return _quadTree({x:x,y:y,width:subw,height:subh},next,quad.maxElements,quad.maxLevel)}function _quadInsert(el,sizedPoint,quad){if(quad.level<quad.maxLevel)for(var indexes=_quadIndexes(sizedPoint,quad.corners),i=0,l=indexes.length;i<l;i++)quad.nodes[indexes[i]]===undefined&&(quad.nodes[indexes[i]]=_quadSubdivide(indexes[i],quad)),_quadInsert(el,sizedPoint,quad.nodes[indexes[i]]);else quad.elements.push(el)}function _quadRetrievePoint(point,quad){if(quad.level<quad.maxLevel){var index=_quadIndex(point,quad.bounds);return quad.nodes[index]!==undefined?_quadRetrievePoint(point,quad.nodes[index]):[]}return quad.elements}function _quadRetrieveArea(rectData,quad,collisionFunc,els){if(els=els||{},quad.level<quad.maxLevel)for(var indexes=collisionFunc(rectData,quad.corners),i=0,l=indexes.length;i<l;i++)quad.nodes[indexes[i]]!==undefined&&_quadRetrieveArea(rectData,quad.nodes[indexes[i]],collisionFunc,els);else for(var j=0,m=quad.elements.length;j<m;j++)els[quad.elements[j].id]===undefined&&(els[quad.elements[j].id]=quad.elements[j]);return els}function _quadTree(bounds,level,maxElements,maxLevel){return{level:level||0,bounds:bounds,corners:_geom.splitSquare(bounds),maxElements:maxElements||40,maxLevel:maxLevel||8,elements:[],nodes:[]}}var _geom={pointToSquare:function(n){return{x1:n.x-n.size,y1:n.y-n.size,x2:n.x+n.size,y2:n.y-n.size,height:2*n.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,cp){var pt=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,cp.x,cp.y),minX=Math.min(e.x1,e.x2,pt.x),maxX=Math.max(e.x1,e.x2,pt.x),minY=Math.min(e.y1,e.y2,pt.y),maxY=Math.max(e.y1,e.y2,pt.y);return{x1:minX-e.size,y1:minY-e.size,x2:maxX+e.size,y2:minY-e.size,height:maxY-minY+2*e.size}},selfLoopToSquare:function(n){var cp=sigma.utils.getSelfLoopControlPoints(n.x,n.y,n.size),minX=Math.min(n.x,cp.x1,cp.x2),maxX=Math.max(n.x,cp.x1,cp.x2),minY=Math.min(n.y,cp.y1,cp.y2),maxY=Math.max(n.y,cp.y1,cp.y2);return{x1:minX-n.size,y1:minY-n.size,x2:maxX+n.size,y2:minY-n.size,height:maxY-minY+2*n.size}},isAxisAligned:function(r){return r.x1===r.x2||r.y1===r.y2},axisAlignedTopPoints:function(r){return r.y1===r.y2&&r.x1<r.x2?r:r.x1===r.x2&&r.y2>r.y1?{x1:r.x1-r.height,y1:r.y1,x2:r.x1,y2:r.y1,height:r.height}:r.x1===r.x2&&r.y2<r.y1?{x1:r.x1,y1:r.y2,x2:r.x2+r.height,y2:r.y2,height:r.height}:{x1:r.x2,y1:r.y1-r.height,x2:r.x1,y2:r.y1-r.height,height:r.height}},lowerLeftCoor:function(r){var width=Math.sqrt(Math.pow(r.x2-r.x1,2)+Math.pow(r.y2-r.y1,2));return{x:r.x1-(r.y2-r.y1)*r.height/width,y:r.y1+(r.x2-r.x1)*r.height/width}},lowerRightCoor:function(r,llc){return{x:llc.x-r.x1+r.x2,y:llc.y-r.y1+r.y2}},rectangleCorners:function(r){var llc=this.lowerLeftCoor(r),lrc=this.lowerRightCoor(r,llc);return[{x:r.x1,y:r.y1},{x:r.x2,y:r.y2},{x:llc.x,y:llc.y},{x:lrc.x,y:lrc.y}]},splitSquare:function(b){return[[{x:b.x,y:b.y},{x:b.x+b.width/2,y:b.y},{x:b.x,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height/2}],[{x:b.x+b.width/2,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x+b.width,y:b.y+b.height/2}],[{x:b.x,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x,y:b.y+b.height},{x:b.x+b.width/2,y:b.y+b.height}],[{x:b.x+b.width/2,y:b.y+b.height/2},{x:b.x+b.width,y:b.y+b.height/2},{x:b.x+b.width/2,y:b.y+b.height},{x:b.x+b.width,y:b.y+b.height}]]},axis:function(c1,c2){return[{x:c1[1].x-c1[0].x,y:c1[1].y-c1[0].y},{x:c1[1].x-c1[3].x,y:c1[1].y-c1[3].y},{x:c2[0].x-c2[2].x,y:c2[0].y-c2[2].y},{x:c2[0].x-c2[1].x,y:c2[0].y-c2[1].y}]},projection:function(c,a){var l=(c.x*a.x+c.y*a.y)/(Math.pow(a.x,2)+Math.pow(a.y,2));return{x:l*a.x,y:l*a.y}},axisCollision:function(a,c1,c2){for(var sc1=[],sc2=[],ci=0;ci<4;ci++){var p1=this.projection(c1[ci],a),p2=this.projection(c2[ci],a);sc1.push(p1.x*a.x+p1.y*a.y),sc2.push(p2.x*a.x+p2.y*a.y)}var maxc1=Math.max.apply(Math,sc1),maxc2=Math.max.apply(Math,sc2),minc1=Math.min.apply(Math,sc1),minc2=Math.min.apply(Math,sc2);return minc2<=maxc1&&maxc2>=minc1},collision:function(c1,c2){for(var axis=this.axis(c1,c2),col=!0,i=0;i<4;i++)col=col&&this.axisCollision(axis[i],c1,c2);return col}},edgequad=function(){this._geom=_geom,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};edgequad.prototype.index=function(graph,params){if(!this._enabled)return this._tree;if(!params.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var prefix=params.prefix||"",cp,source,target,n,e;this._tree=_quadTree(params.bounds,0,params.maxElements,params.maxLevel);for(var edges=graph.edges(),i=0,l=edges.length;i<l;i++)source=graph.nodes(edges[i].source),target=graph.nodes(edges[i].target),e={x1:source[prefix+"x"],y1:source[prefix+"y"],x2:target[prefix+"x"],y2:target[prefix+"y"],size:edges[i][prefix+"size"]||0},"curve"===edges[i].type||"curvedArrow"===edges[i].type?source.id===target.id?(n={x:source[prefix+"x"],y:source[prefix+"y"],size:source[prefix+"size"]||0},_quadInsert(edges[i],_geom.selfLoopToSquare(n),this._tree)):(cp=sigma.utils.getQuadraticControlPoint(e.x1,e.y1,e.x2,e.y2),_quadInsert(edges[i],_geom.quadraticCurveToSquare(e,cp),this._tree)):_quadInsert(edges[i],_geom.lineToSquare(e),this._tree);return this._cache={query:!1,result:!1},this._tree},edgequad.prototype.point=function(x,y){return this._enabled&&this._tree?_quadRetrievePoint({x:x,y:y},this._tree)||[]:[]},edgequad.prototype.area=function(rect){if(!this._enabled)return[];var serialized=JSON.stringify(rect),collisionFunc,rectData;if(this._cache.query===serialized)return this._cache.result;_geom.isAxisAligned(rect)?(collisionFunc=_quadIndexes,rectData=_geom.axisAlignedTopPoints(rect)):(collisionFunc=_quadCollision,rectData=_geom.rectangleCorners(rect));var edges=this._tree?_quadRetrieveArea(rectData,this._tree,collisionFunc):[],edgesArray=[];for(var i in edges)edgesArray.push(edges[i]);return this._cache.query=serialized,this._cache.result=edgesArray,edgesArray},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=edgequad):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=edgequad),exports.edgequad=edgequad):this.edgequad=edgequad}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(target,camera,settings){function _moveHandler(e){var x,y,pos;if(_settings("mouseEnabled")&&(_self.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),_isMouseDown))return _isMoving=!0,_hasDragged=!0,_movingTimeoutId&&clearTimeout(_movingTimeoutId),_movingTimeoutId=setTimeout(function(){_isMoving=!1},_settings("dragTimeout")),sigma.misc.animation.killAll(_camera),_camera.isMoving=!0,pos=_camera.cameraPosition(sigma.utils.getX(e)-_startMouseX,sigma.utils.getY(e)-_startMouseY,!0),x=_startCameraX-pos.x,y=_startCameraY-pos.y,x===_camera.x&&y===_camera.y||(_lastCameraX=_camera.x,_lastCameraY=_camera.y,_camera.goTo({x:x,y:y})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function _upHandler(e){if(_settings("mouseEnabled")&&_isMouseDown){_isMouseDown=!1,_movingTimeoutId&&clearTimeout(_movingTimeoutId),_camera.isMoving=!1;var x=sigma.utils.getX(e),y=sigma.utils.getY(e);_isMoving?(sigma.misc.animation.killAll(_camera),sigma.misc.animation.camera(_camera,{x:_camera.x+_settings("mouseInertiaRatio")*(_camera.x-_lastCameraX),y:_camera.y+_settings("mouseInertiaRatio")*(_camera.y-_lastCameraY)},{easing:"quadraticOut",duration:_settings("mouseInertiaDuration")})):_startMouseX===x&&_startMouseY===y||_camera.goTo({x:_camera.x,y:_camera.y}),_self.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),_isMoving=!1}}function _downHandler(e){if(_settings("mouseEnabled"))switch(_startCameraX=_camera.x,_startCameraY=_camera.y,_lastCameraX=_camera.x,_lastCameraY=_camera.y,_startMouseX=sigma.utils.getX(e),_startMouseY=sigma.utils.getY(e),_hasDragged=!1,_downStartTime=(new Date).getTime(),e.which){case 2:break;case 3:_self.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,_startMouseX,_startMouseY));break;default:_isMouseDown=!0,_self.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,_startMouseX,_startMouseY))}}function _outHandler(e){_settings("mouseEnabled")&&_self.dispatchEvent("mouseout")}function _clickHandler(e){if(_settings("mouseEnabled")){var event=sigma.utils.mouseCoords(e);event.isDragging=(new Date).getTime()-_downStartTime>100&&_hasDragged,_self.dispatchEvent("click",event)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function _doubleClickHandler(e){var pos,ratio,animation;if(_settings("mouseEnabled"))return ratio=1/_settings("doubleClickZoomingRatio"),_self.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,_startMouseX,_startMouseY)),_settings("doubleClickEnabled")&&(pos=_camera.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),animation={duration:_settings("doubleClickZoomDuration")},sigma.utils.zoomTo(_camera,pos.x,pos.y,ratio,animation)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function _wheelHandler(e){var pos,ratio,animation,wheelDelta=sigma.utils.getDelta(e);if(_settings("mouseEnabled")&&_settings("mouseWheelEnabled")&&0!==wheelDelta)return ratio=wheelDelta>0?1/_settings("zoomingRatio"):_settings("zoomingRatio"),pos=_camera.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),animation={duration:_settings("mouseZoomDuration")},sigma.utils.zoomTo(_camera,pos.x,pos.y,ratio,animation),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}var _self=this,_target=target,_camera=camera,_settings=settings,_startCameraX,_startCameraY,_startCameraAngle,_lastCameraX,_lastCameraY,_lastCameraAngle,_lastCameraRatio,_startMouseX,_startMouseY,_isMouseDown,_isMoving,_hasDragged,_downStartTime,_movingTimeoutId;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(_target,"click",_doubleClickHandler),_target.addEventListener("DOMMouseScroll",_wheelHandler,!1),_target.addEventListener("mousewheel",_wheelHandler,!1),_target.addEventListener("mousemove",_moveHandler,!1),_target.addEventListener("mousedown",_downHandler,!1),_target.addEventListener("click",_clickHandler,!1),_target.addEventListener("mouseout",_outHandler,!1),document.addEventListener("mouseup",_upHandler,!1),this.kill=function(){sigma.utils.unbindDoubleClick(_target,"click"),_target.removeEventListener("DOMMouseScroll",_wheelHandler),_target.removeEventListener("mousewheel",_wheelHandler),_target.removeEventListener("mousemove",_moveHandler),_target.removeEventListener("mousedown",_downHandler),_target.removeEventListener("click",_clickHandler),_target.removeEventListener("mouseout",_outHandler),document.removeEventListener("mouseup",_upHandler)}}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(target,camera,settings){function position(e){var offset=sigma.utils.getOffset(_target);return{x:e.pageX-offset.left,y:e.pageY-offset.top}}function _handleStart(e){if(_settings("touchEnabled")){var x0,x1,y0,y1,pos0,pos1;switch(_downTouches=e.touches,_downTouches.length){case 1:_camera.isMoving=!0,_touchMode=1,_startCameraX=_camera.x,_startCameraY=_camera.y,_lastCameraX=_camera.x,_lastCameraY=_camera.y,pos0=position(_downTouches[0]),_startTouchX0=pos0.x,_startTouchY0=pos0.y;break;case 2:return _camera.isMoving=!0,_touchMode=2,pos0=position(_downTouches[0]),pos1=position(_downTouches[1]),x0=pos0.x,y0=pos0.y,x1=pos1.x,y1=pos1.y,_lastCameraX=_camera.x,_lastCameraY=_camera.y,_startCameraAngle=_camera.angle,_startCameraRatio=_camera.ratio,_startCameraX=_camera.x,_startCameraY=_camera.y,_startTouchX0=x0,_startTouchY0=y0,_startTouchX1=x1,_startTouchY1=y1,_startTouchAngle=Math.atan2(_startTouchY1-_startTouchY0,_startTouchX1-_startTouchX0),_startTouchDistance=Math.sqrt((_startTouchY1-_startTouchY0)*(_startTouchY1-_startTouchY0)+(_startTouchX1-_startTouchX0)*(_startTouchX1-_startTouchX0)),e.preventDefault(),!1}}}function _handleLeave(e){if(_settings("touchEnabled")){_downTouches=e.touches;var inertiaRatio=_settings("touchInertiaRatio");switch(_movingTimeoutId&&(_isMoving=!1,clearTimeout(_movingTimeoutId)),_touchMode){case 2:if(1===e.touches.length){_handleStart(e),e.preventDefault();break}case 1:_camera.isMoving=!1,_self.dispatchEvent("stopDrag"),_isMoving&&(_doubleTap=!1,sigma.misc.animation.camera(_camera,{x:_camera.x+inertiaRatio*(_camera.x-_lastCameraX),y:_camera.y+inertiaRatio*(_camera.y-_lastCameraY)},{easing:"quadraticOut",duration:_settings("touchInertiaDuration")})),_isMoving=!1,_touchMode=0}}}function _handleMove(e){if(!_doubleTap&&_settings("touchEnabled")){var x0,x1,y0,y1,cos,sin,end,pos0,pos1,diff,start,dAngle,dRatio,newStageX,newStageY,newStageRatio,newStageAngle;switch(_downTouches=e.touches,_isMoving=!0,_movingTimeoutId&&clearTimeout(_movingTimeoutId),_movingTimeoutId=setTimeout(function(){_isMoving=!1},_settings("dragTimeout")),_touchMode){case 1:pos0=position(_downTouches[0]),x0=pos0.x,y0=pos0.y,diff=_camera.cameraPosition(x0-_startTouchX0,y0-_startTouchY0,!0),newStageX=_startCameraX-diff.x,newStageY=_startCameraY-diff.y,newStageX===_camera.x&&newStageY===_camera.y||(_lastCameraX=_camera.x,_lastCameraY=_camera.y,_camera.goTo({x:newStageX,y:newStageY}),_self.dispatchEvent("mousemove",sigma.utils.mouseCoords(e,pos0.x,pos0.y)),_self.dispatchEvent("drag"));break;case 2:pos0=position(_downTouches[0]),pos1=position(_downTouches[1]),x0=pos0.x,y0=pos0.y,x1=pos1.x,y1=pos1.y,start=_camera.cameraPosition((_startTouchX0+_startTouchX1)/2-sigma.utils.getCenter(e).x,(_startTouchY0+_startTouchY1)/2-sigma.utils.getCenter(e).y,!0),end=_camera.cameraPosition((x0+x1)/2-sigma.utils.getCenter(e).x,(y0+y1)/2-sigma.utils.getCenter(e).y,!0),dAngle=Math.atan2(y1-y0,x1-x0)-_startTouchAngle,dRatio=Math.sqrt((y1-y0)*(y1-y0)+(x1-x0)*(x1-x0))/_startTouchDistance,x0=start.x,y0=start.y,newStageRatio=_startCameraRatio/dRatio,x0*=dRatio,y0*=dRatio,newStageAngle=_startCameraAngle-dAngle,cos=Math.cos(-dAngle),sin=Math.sin(-dAngle),x1=x0*cos+y0*sin,y1=y0*cos-x0*sin,x0=x1,y0=y1,newStageX=x0-end.x+_startCameraX,newStageY=y0-end.y+_startCameraY,newStageRatio===_camera.ratio&&newStageAngle===_camera.angle&&newStageX===_camera.x&&newStageY===_camera.y||(_lastCameraX=_camera.x,_lastCameraY=_camera.y,_lastCameraAngle=_camera.angle,_lastCameraRatio=_camera.ratio,_camera.goTo({x:newStageX,y:newStageY,angle:newStageAngle,ratio:newStageRatio}),_self.dispatchEvent("drag"))}return e.preventDefault(),!1}}function _doubleTapHandler(e){var pos,ratio,animation;if(e.touches&&1===e.touches.length&&_settings("touchEnabled"))return _doubleTap=!0,ratio=1/_settings("doubleClickZoomingRatio"),pos=position(e.touches[0]),_self.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,pos.x,pos.y)),_settings("doubleClickEnabled")&&(pos=_camera.cameraPosition(pos.x-sigma.utils.getCenter(e).x,pos.y-sigma.utils.getCenter(e).y,!0),animation={duration:_settings("doubleClickZoomDuration"),onComplete:function(){_doubleTap=!1}},sigma.utils.zoomTo(_camera,pos.x,pos.y,ratio,animation)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}var _self=this,_target=target,_camera=camera,_settings=settings,_startCameraX,_startCameraY,_startCameraAngle,_startCameraRatio,_lastCameraX,_lastCameraY,_lastCameraAngle,_lastCameraRatio,_downTouches=[],_startTouchX0,_startTouchY0,_startTouchX1,_startTouchY1,_startTouchAngle,_startTouchDistance,_touchMode,_isMoving,_doubleTap,_movingTimeoutId;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(_target,"touchstart",_doubleTapHandler),_target.addEventListener("touchstart",_handleStart,!1),_target.addEventListener("touchend",_handleLeave,!1),_target.addEventListener("touchcancel",_handleLeave,!1),_target.addEventListener("touchleave",_handleLeave,!1),_target.addEventListener("touchmove",_handleMove,!1),this.kill=function(){sigma.utils.unbindDoubleClick(_target,"touchstart"),_target.addEventListener("touchstart",_handleStart),_target.addEventListener("touchend",_handleLeave),_target.addEventListener("touchcancel",_handleLeave),_target.addEventListener("touchleave",_handleLeave),_target.addEventListener("touchmove",_handleMove)}}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(graph,camera,settings,options){if("object"!=typeof options)throw"sigma.renderers.canvas: Wrong arguments.";if(!(options.container instanceof HTMLElement))throw"Container not found.";var k,i,l,a,fn,self=this;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=graph,this.camera=camera,this.contexts={},this.domElements={},this.options=options,this.container=this.options.container,this.settings="object"==typeof options.settings&&options.settings?settings.embedObjects(options.settings):settings,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],i=0,l=a.length;i<l;i++)fn="function"==typeof a[i]?a[i]:sigma.captors[a[i]],this.captors.push(new fn(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(options){options=options||{};var a,i,k,l,o,id,end,job,start,edges,renderers,rendererType,batchSize,tempGCO,index={},graph=this.graph,nodes=this.graph.nodes,prefix=this.options.prefix||"",drawEdges=this.settings(options,"drawEdges"),drawNodes=this.settings(options,"drawNodes"),drawLabels=this.settings(options,"drawLabels"),drawEdgeLabels=this.settings(options,"drawEdgeLabels"),embedSettings=this.settings.embedObjects(options,{prefix:this.options.prefix});this.resize(!1),this.settings(options,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(drawEdges=!1),this.camera.applyView(undefined,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(k in this.jobs)conrad.hasJob(k)&&conrad.killJob(k);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)index[a[i].id]=a[i];if(drawEdges){for(a=graph.edges(),i=0,l=a.length;i<l;i++)o=a[i],!index[o.source]&&!index[o.target]||o.hidden||nodes(o.source).hidden||nodes(o.target).hidden||this.edgesOnScreen.push(o);if(this.settings(options,"batchEdgesDrawing"))id="edges_"+this.conradId,batchSize=embedSettings("canvasEdgesBatchSize"),edges=this.edgesOnScreen,l=edges.length,start=0,end=Math.min(edges.length,start+batchSize),job=function(){for(tempGCO=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",renderers=sigma.canvas.edges,i=start;i<end;i++)o=edges[i],(renderers[o.type||this.settings(options,"defaultEdgeType")]||renderers.def)(o,graph.nodes(o.source),graph.nodes(o.target),this.contexts.edges,embedSettings);if(drawEdgeLabels)for(renderers=sigma.canvas.edges.labels,i=start;i<end;i++)o=edges[i],o.hidden||(renderers[o.type||this.settings(options,"defaultEdgeType")]||renderers.def)(o,graph.nodes(o.source),graph.nodes(o.target),this.contexts.labels,embedSettings);return this.contexts.edges.globalCompositeOperation=tempGCO,end===edges.length?(delete this.jobs[id],!1):(start=end+1,end=Math.min(edges.length,start+batchSize),!0)},this.jobs[id]=job,conrad.addJob(id,job.bind(this));else{for(renderers=sigma.canvas.edges,a=this.edgesOnScreen,i=0,l=a.length;i<l;i++)o=a[i],(renderers[o.type||this.settings(options,"defaultEdgeType")]||renderers.def)(o,graph.nodes(o.source),graph.nodes(o.target),this.contexts.edges,embedSettings);if(drawEdgeLabels)for(renderers=sigma.canvas.edges.labels,a=this.edgesOnScreen,i=0,l=a.length;i<l;i++)a[i].hidden||(renderers[a[i].type||this.settings(options,"defaultEdgeType")]||renderers.def)(a[i],graph.nodes(a[i].source),graph.nodes(a[i].target),this.contexts.labels,embedSettings)}}if(drawNodes)for(renderers=sigma.canvas.nodes,a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)a[i].hidden||(renderers[a[i].type||this.settings(options,"defaultNodeType")]||renderers.def)(a[i],this.contexts.nodes,embedSettings);if(drawLabels)for(renderers=sigma.canvas.labels,a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)a[i].hidden||(renderers[a[i].type||this.settings(options,"defaultNodeType")]||renderers.def)(a[i],this.contexts.labels,embedSettings);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(tag,id){var dom=document.createElement(tag);dom.style.position="absolute",dom.setAttribute("class","sigma-"+id),this.domElements[id]=dom,this.container.appendChild(dom),"canvas"===tag.toLowerCase()&&(this.contexts[id]=dom.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(w,h){var k,oldWidth=this.width,oldHeight=this.height,pixelRatio=sigma.utils.getPixelRatio();if(w!==undefined&&h!==undefined?(this.width=w,this.height=h):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,w=this.width,h=this.height),oldWidth!==this.width||oldHeight!==this.height)for(k in this.domElements)this.domElements[k].style.width=w+"px",this.domElements[k].style.height=h+"px","canvas"===this.domElements[k].tagName.toLowerCase()&&(this.domElements[k].setAttribute("width",w*pixelRatio+"px"),this.domElements[k].setAttribute("height",h*pixelRatio+"px"),1!==pixelRatio&&this.contexts[k].scale(pixelRatio,pixelRatio));return this},sigma.renderers.canvas.prototype.clear=function(){for(var k in this.contexts)this.contexts[k].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var k,captor;captor=this.captors.pop();)captor.kill();delete this.captors;for(k in this.domElements)this.domElements[k].parentNode.removeChild(this.domElements[k]),delete this.domElements[k],delete this.contexts[k];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(graph,camera,settings,options){if("object"!=typeof options)throw"sigma.renderers.webgl: Wrong arguments.";if(!(options.container instanceof HTMLElement))throw"Container not found.";var k,i,l,a,fn,_self=this;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=graph,this.camera=camera,this.contexts={},this.domElements={},this.options=options,this.container=this.options.container,this.settings="object"==typeof options.settings&&options.settings?settings.embedObjects(options.settings):settings,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeIndicesArrays",{value:{}}),this.settings(options,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],i=0,l=a.length;i<l;i++)fn="function"==typeof a[i]?a[i]:sigma.captors[a[i]],this.captors.push(new fn(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var a,i,l,k,type,renderer,graph=this.graph,options=sigma.utils.extend(options,this.options),defaultEdgeType=this.settings(options,"defaultEdgeType"),defaultNodeType=this.settings(options,"defaultNodeType");for(k in this.nodeFloatArrays)delete this.nodeFloatArrays[k];for(k in this.edgeFloatArrays)delete this.edgeFloatArrays[k];for(k in this.edgeIndicesArrays)delete this.edgeIndicesArrays[k];for(a=graph.edges(),i=0,l=a.length;i<l;i++)type=a[i].type||defaultEdgeType,k=type&&sigma.webgl.edges[type]?type:"def",this.edgeFloatArrays[k]||(this.edgeFloatArrays[k]={edges:[]}),this.edgeFloatArrays[k].edges.push(a[i]);for(a=graph.nodes(),i=0,l=a.length;i<l;i++)type=a[i].type||defaultNodeType,k=type&&sigma.webgl.nodes[type]?type:"def",this.nodeFloatArrays[k]||(this.nodeFloatArrays[k]={nodes:[]}),this.nodeFloatArrays[k].nodes.push(a[i]);for(k in this.edgeFloatArrays){for(renderer=sigma.webgl.edges[k],a=this.edgeFloatArrays[k].edges,this.edgeFloatArrays[k].array=new Float32Array(a.length*renderer.POINTS*renderer.ATTRIBUTES),i=0,l=a.length;i<l;i++)a[i].hidden||graph.nodes(a[i].source).hidden||graph.nodes(a[i].target).hidden||renderer.addEdge(a[i],graph.nodes(a[i].source),graph.nodes(a[i].target),this.edgeFloatArrays[k].array,i*renderer.POINTS*renderer.ATTRIBUTES,options.prefix,this.settings);"function"==typeof renderer.computeIndices&&(this.edgeIndicesArrays[k]=renderer.computeIndices(this.edgeFloatArrays[k].array))}for(k in this.nodeFloatArrays)for(renderer=sigma.webgl.nodes[k],a=this.nodeFloatArrays[k].nodes,this.nodeFloatArrays[k].array=new Float32Array(a.length*renderer.POINTS*renderer.ATTRIBUTES),i=0,l=a.length;i<l;i++)this.nodeFloatArrays[k].array||(this.nodeFloatArrays[k].array=new Float32Array(a.length*renderer.POINTS*renderer.ATTRIBUTES)),a[i].hidden||renderer.addNode(a[i],this.nodeFloatArrays[k].array,i*renderer.POINTS*renderer.ATTRIBUTES,options.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(params){var a,i,l,k,o,program,renderer,self=this,graph=this.graph,nodesGl=this.contexts.nodes,edgesGl=this.contexts.edges,matrix=this.camera.getMatrix(),options=sigma.utils.extend(params,this.options),drawLabels=this.settings(options,"drawLabels"),drawEdges=this.settings(options,"drawEdges"),drawNodes=this.settings(options,"drawNodes");this.resize(!1),this.settings(options,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(drawEdges=!1),this.clear(),matrix=sigma.utils.matrices.multiply(matrix,sigma.utils.matrices.translation(this.width/2,this.height/2));for(k in this.jobs)conrad.hasJob(k)&&conrad.killJob(k);if(drawEdges)if(this.settings(options,"batchEdgesDrawing"))(function(){var a,k,i,id,job,arr,end,start,indices,renderer,batchSize,currentProgram;id="edges_"+this.conradId,batchSize=this.settings(options,"webglEdgesBatchSize"),a=Object.keys(this.edgeFloatArrays),a.length&&(i=0,renderer=sigma.webgl.edges[a[i]],arr=this.edgeFloatArrays[a[i]].array,indices=this.edgeIndicesArrays[a[i]],start=0,end=Math.min(start+batchSize*renderer.POINTS,arr.length/renderer.ATTRIBUTES),job=function(){return this.edgePrograms[a[i]]||(this.edgePrograms[a[i]]=renderer.initProgram(edgesGl)),start<end&&(edgesGl.useProgram(this.edgePrograms[a[i]]),renderer.render(edgesGl,this.edgePrograms[a[i]],arr,{settings:this.settings,matrix:matrix,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(options,"webglOversamplingRatio"),start:start,count:end-start,indicesData:indices})),end>=arr.length/renderer.ATTRIBUTES&&i===a.length-1?(delete this.jobs[id],!1):(end>=arr.length/renderer.ATTRIBUTES?(i++,arr=this.edgeFloatArrays[a[i]].array,renderer=sigma.webgl.edges[a[i]],start=0,end=Math.min(start+batchSize*renderer.POINTS,arr.length/renderer.ATTRIBUTES)):(start=end,end=Math.min(start+batchSize*renderer.POINTS,arr.length/renderer.ATTRIBUTES)),!0)},this.jobs[id]=job,conrad.addJob(id,job.bind(this)))}).call(this);else for(k in this.edgeFloatArrays)renderer=sigma.webgl.edges[k],this.edgePrograms[k]||(this.edgePrograms[k]=renderer.initProgram(edgesGl)),this.edgeFloatArrays[k]&&(edgesGl.useProgram(this.edgePrograms[k]),renderer.render(edgesGl,this.edgePrograms[k],this.edgeFloatArrays[k].array,{settings:this.settings,matrix:matrix,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(options,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[k]}));if(drawNodes){nodesGl.blendFunc(nodesGl.SRC_ALPHA,nodesGl.ONE_MINUS_SRC_ALPHA),nodesGl.enable(nodesGl.BLEND);for(k in this.nodeFloatArrays)renderer=sigma.webgl.nodes[k],this.nodePrograms[k]||(this.nodePrograms[k]=renderer.initProgram(nodesGl)),this.nodeFloatArrays[k]&&(nodesGl.useProgram(this.nodePrograms[k]),renderer.render(nodesGl,this.nodePrograms[k],this.nodeFloatArrays[k].array,{settings:this.settings,matrix:matrix,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(options,"webglOversamplingRatio")}))}if(drawLabels)for(a=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(undefined,undefined,{nodes:a,edges:[],width:this.width,height:this.height}),o=function(key){return self.settings({prefix:self.camera.prefix},key)},i=0,l=a.length;i<l;i++)a[i].hidden||(sigma.canvas.labels[a[i].type||this.settings(options,"defaultNodeType")]||sigma.canvas.labels.def)(a[i],this.contexts.labels,o);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(tag,id,webgl){var gl,dom=document.createElement(tag),self=this;dom.style.position="absolute",dom.setAttribute("class","sigma-"+id),this.domElements[id]=dom,this.container.appendChild(dom),"canvas"===tag.toLowerCase()&&(this.contexts[id]=dom.getContext(webgl?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),webgl&&(dom.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),dom.addEventListener("webglcontextrestored",function(e){self.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(w,h){var k,oldWidth=this.width,oldHeight=this.height,pixelRatio=sigma.utils.getPixelRatio();if(w!==undefined&&h!==undefined?(this.width=w,this.height=h):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,w=this.width,h=this.height),oldWidth!==this.width||oldHeight!==this.height)for(k in this.domElements)this.domElements[k].style.width=w+"px",this.domElements[k].style.height=h+"px","canvas"===this.domElements[k].tagName.toLowerCase()&&(this.contexts[k]&&this.contexts[k].scale?(this.domElements[k].setAttribute("width",w*pixelRatio+"px"),this.domElements[k].setAttribute("height",h*pixelRatio+"px"),1!==pixelRatio&&this.contexts[k].scale(pixelRatio,pixelRatio)):(this.domElements[k].setAttribute("width",w*this.settings("webglOversamplingRatio")+"px"),this.domElements[k].setAttribute("height",h*this.settings("webglOversamplingRatio")+"px")));for(k in this.contexts)this.contexts[k]&&this.contexts[k].viewport&&this.contexts[k].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var k,captor;captor=this.captors.pop();)captor.kill();delete this.captors;for(k in this.domElements)this.domElements[k].parentNode.removeChild(this.domElements[k]),delete this.domElements[k],delete this.contexts[k];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(graph,camera,settings,options){if("object"!=typeof options)throw"sigma.renderers.svg: Wrong arguments.";if(!(options.container instanceof HTMLElement))throw"Container not found.";var i,l,a,fn,self=this;for(sigma.classes.dispatcher.extend(this),this.graph=graph,this.camera=camera,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=options,this.container=this.options.container,this.settings="object"==typeof options.settings&&options.settings?settings.embedObjects(options.settings):settings,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],i=0,l=a.length;i<l;i++)fn="function"==typeof a[i]?a[i]:sigma.captors[a[i]],this.captors.push(new fn(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){self.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(options){options=options||{};var a,i,k,e,l,o,source,target,start,edges,renderers,subrenderers,index={},graph=this.graph,nodes=this.graph.nodes,prefix=this.options.prefix||"",drawEdges=this.settings(options,"drawEdges"),drawNodes=this.settings(options,"drawNodes"),drawLabels=this.settings(options,"drawLabels"),embedSettings=this.settings.embedObjects(options,{prefix:this.options.prefix,forceLabels:this.options.forceLabels});for(this.settings(options,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(drawEdges=!1),this.camera.applyView(undefined,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)index[a[i].id]=a[i];for(a=graph.edges(),i=0,l=a.length;i<l;i++)o=a[i],!index[o.source]&&!index[o.target]||o.hidden||nodes(o.source).hidden||nodes(o.target).hidden||this.edgesOnScreen.push(o);if(renderers=sigma.svg.nodes,subrenderers=sigma.svg.labels,drawNodes)for(a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)a[i].hidden||this.domElements.nodes[a[i].id]||(e=(renderers[a[i].type]||renderers.def).create(a[i],embedSettings),this.domElements.nodes[a[i].id]=e,this.domElements.groups.nodes.appendChild(e),e=(subrenderers[a[i].type]||subrenderers.def).create(a[i],embedSettings),this.domElements.labels[a[i].id]=e,this.domElements.groups.labels.appendChild(e));if(drawNodes)for(a=this.nodesOnScreen,i=0,l=a.length;i<l;i++)a[i].hidden||((renderers[a[i].type]||renderers.def).update(a[i],this.domElements.nodes[a[i].id],embedSettings),(subrenderers[a[i].type]||subrenderers.def).update(a[i],this.domElements.labels[a[i].id],embedSettings));if(renderers=sigma.svg.edges,drawEdges)for(a=this.edgesOnScreen,i=0,l=a.length;i<l;i++)this.domElements.edges[a[i].id]||(source=nodes(a[i].source),target=nodes(a[i].target),e=(renderers[a[i].type]||renderers.def).create(a[i],source,target,embedSettings),this.domElements.edges[a[i].id]=e,this.domElements.groups.edges.appendChild(e));if(drawEdges)for(a=this.edgesOnScreen,i=0,l=a.length;i<l;i++)source=nodes(a[i].source),target=nodes(a[i].target),(renderers[a[i].type]||renderers.def).update(a[i],this.domElements.edges[a[i].id],source,target,embedSettings);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(tag){var dom=document.createElementNS(this.settings("xmlns"),tag),c=this.settings("classPrefix"),g,l,i;dom.style.position="absolute",dom.setAttribute("class",c+"-svg"),dom.setAttribute("xmlns",this.settings("xmlns")),dom.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),dom.setAttribute("version","1.1");var canvas=document.createElement("canvas");canvas.setAttribute("class",c+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(dom);var groups=["edges","nodes","labels","hovers"];for(i=0,l=groups.length;i<l;i++)g=document.createElementNS(this.settings("xmlns"),"g"),g.setAttributeNS(null,"id",c+"-group-"+groups[i]),g.setAttributeNS(null,"class",c+"-group"),this.domElements.groups[groups[i]]=this.domElements.graph.appendChild(g);this.container.appendChild(canvas),this.measurementCanvas=canvas.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(elements){var o,i;for(i in elements)o=elements[i],sigma.svg.utils.hide(o);return this},sigma.renderers.svg.prototype.bindHovers=function(prefix){function overNode(e){var node=e.data.node,embedSettings=self.settings.embedObjects({prefix:prefix});if(embedSettings("enableHovering")){var hover=(renderers[node.type]||renderers.def).create(node,self.domElements.nodes[node.id],self.measurementCanvas,embedSettings);self.domElements.hovers[node.id]=hover,self.domElements.groups.hovers.appendChild(hover),hoveredNode=node}}function outNode(e){var node=e.data.node,embedSettings=self.settings.embedObjects({prefix:prefix});embedSettings("enableHovering")&&(self.domElements.groups.hovers.removeChild(self.domElements.hovers[node.id]),hoveredNode=null,delete self.domElements.hovers[node.id],self.domElements.groups.nodes.appendChild(self.domElements.nodes[node.id]))}function update(){if(hoveredNode){var embedSettings=self.settings.embedObjects({prefix:prefix});self.domElements.groups.hovers.removeChild(self.domElements.hovers[hoveredNode.id]),delete self.domElements.hovers[hoveredNode.id];var hover=(renderers[hoveredNode.type]||renderers.def).create(hoveredNode,self.domElements.nodes[hoveredNode.id],self.measurementCanvas,embedSettings);self.domElements.hovers[hoveredNode.id]=hover,self.domElements.groups.hovers.appendChild(hover)}}var renderers=sigma.svg.hovers,self=this,hoveredNode;this.bind("overNode",overNode),this.bind("outNode",outNode),this.bind("render",update)},sigma.renderers.svg.prototype.resize=function(w,h){var oldWidth=this.width,oldHeight=this.height,pixelRatio=1;return w!==undefined&&h!==undefined?(this.width=w,this.height=h):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,w=this.width,h=this.height),oldWidth===this.width&&oldHeight===this.height||(this.domElements.graph.style.width=w+"px",this.domElements.graph.style.height=h+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",w*pixelRatio),this.domElements.graph.setAttribute("height",h*pixelRatio))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}).call(this);
                !function(global){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var canvas,webgl=!!global.WebGLRenderingContext;if(webgl){canvas=document.createElement("canvas");try{webgl=!(!canvas.getContext("webgl")&&!canvas.getContext("experimental-webgl"))}catch(e){webgl=!1}}sigma.renderers.def=webgl?sigma.renderers.webgl:sigma.renderers.canvas}(this);
                !function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(node,data,i,prefix,settings){var color=sigma.utils.floatColor(node.color||settings("defaultNodeColor"));data[i++]=node[prefix+"x"],data[i++]=node[prefix+"y"],data[i++]=node[prefix+"size"],data[i++]=color,data[i++]=0,data[i++]=node[prefix+"x"],data[i++]=node[prefix+"y"],data[i++]=node[prefix+"size"],data[i++]=color,data[i++]=2*Math.PI/3,data[i++]=node[prefix+"x"],data[i++]=node[prefix+"y"],data[i++]=node[prefix+"size"],data[i++]=color,data[i++]=4*Math.PI/3},render:function(gl,program,data,params){var buffer,positionLocation=gl.getAttribLocation(program,"a_position"),sizeLocation=gl.getAttribLocation(program,"a_size"),colorLocation=gl.getAttribLocation(program,"a_color"),angleLocation=gl.getAttribLocation(program,"a_angle"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),ratioLocation=gl.getUniformLocation(program,"u_ratio"),scaleLocation=gl.getUniformLocation(program,"u_scale");buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,data,gl.DYNAMIC_DRAW),gl.uniform2f(resolutionLocation,params.width,params.height),gl.uniform1f(ratioLocation,1/Math.pow(params.ratio,params.settings("nodesPowRatio"))),gl.uniform1f(scaleLocation,params.scalingRatio),gl.uniformMatrix3fv(matrixLocation,!1,params.matrix),gl.enableVertexAttribArray(positionLocation),gl.enableVertexAttribArray(sizeLocation),gl.enableVertexAttribArray(colorLocation),gl.enableVertexAttribArray(angleLocation),gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),gl.vertexAttribPointer(sizeLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),gl.vertexAttribPointer(angleLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),gl.drawArrays(gl.TRIANGLES,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;return vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER),fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),gl.FRAGMENT_SHADER),program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader])}}}();
                !function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(node,data,i,prefix,settings){data[i++]=node[prefix+"x"],data[i++]=node[prefix+"y"],data[i++]=node[prefix+"size"],data[i++]=sigma.utils.floatColor(node.color||settings("defaultNodeColor"))},render:function(gl,program,data,params){var buffer,positionLocation=gl.getAttribLocation(program,"a_position"),sizeLocation=gl.getAttribLocation(program,"a_size"),colorLocation=gl.getAttribLocation(program,"a_color"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),ratioLocation=gl.getUniformLocation(program,"u_ratio"),scaleLocation=gl.getUniformLocation(program,"u_scale");buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,data,gl.DYNAMIC_DRAW),gl.uniform2f(resolutionLocation,params.width,params.height),gl.uniform1f(ratioLocation,1/Math.pow(params.ratio,params.settings("nodesPowRatio"))),gl.uniform1f(scaleLocation,params.scalingRatio),gl.uniformMatrix3fv(matrixLocation,!1,params.matrix),gl.enableVertexAttribArray(positionLocation),gl.enableVertexAttribArray(sizeLocation),gl.enableVertexAttribArray(colorLocation),gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),gl.vertexAttribPointer(sizeLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),gl.drawArrays(gl.POINTS,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;return vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER),fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),gl.FRAGMENT_SHADER),program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader])}}}();
                !function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(edge,source,target,data,i,prefix,settings){var w=(edge[prefix+"size"]||1)/2,x1=source[prefix+"x"],y1=source[prefix+"y"],x2=target[prefix+"x"],y2=target[prefix+"y"],color=edge.color;if(!color)switch(settings("edgeColor")){case"source":color=source.color||settings("defaultNodeColor");break;case"target":color=target.color||settings("defaultNodeColor");break;default:color=settings("defaultEdgeColor")}color=sigma.utils.floatColor(color),data[i++]=x1,data[i++]=y1,data[i++]=x2,data[i++]=y2,data[i++]=w,data[i++]=0,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=1,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=0,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=0,data[i++]=color,data[i++]=x1,data[i++]=y1,data[i++]=x2,data[i++]=y2,data[i++]=w,data[i++]=1,data[i++]=color,data[i++]=x1,data[i++]=y1,data[i++]=x2,data[i++]=y2,data[i++]=w,data[i++]=0,data[i++]=color},render:function(gl,program,data,params){var buffer,colorLocation=gl.getAttribLocation(program,"a_color"),positionLocation1=gl.getAttribLocation(program,"a_position1"),positionLocation2=gl.getAttribLocation(program,"a_position2"),thicknessLocation=gl.getAttribLocation(program,"a_thickness"),minusLocation=gl.getAttribLocation(program,"a_minus"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),matrixHalfPiLocation=gl.getUniformLocation(program,"u_matrixHalfPi"),matrixHalfPiMinusLocation=gl.getUniformLocation(program,"u_matrixHalfPiMinus"),ratioLocation=gl.getUniformLocation(program,"u_ratio"),scaleLocation=gl.getUniformLocation(program,"u_scale");buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,data,gl.STATIC_DRAW),gl.uniform2f(resolutionLocation,params.width,params.height),gl.uniform1f(ratioLocation,params.ratio/Math.pow(params.ratio,params.settings("edgesPowRatio"))),gl.uniform1f(scaleLocation,params.scalingRatio),gl.uniformMatrix3fv(matrixLocation,!1,params.matrix),gl.uniformMatrix2fv(matrixHalfPiLocation,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),gl.uniformMatrix2fv(matrixHalfPiMinusLocation,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),gl.enableVertexAttribArray(colorLocation),gl.enableVertexAttribArray(positionLocation1),gl.enableVertexAttribArray(positionLocation2),gl.enableVertexAttribArray(thicknessLocation),gl.enableVertexAttribArray(minusLocation),gl.vertexAttribPointer(positionLocation1,2,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),gl.vertexAttribPointer(positionLocation2,2,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),gl.vertexAttribPointer(thicknessLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),gl.vertexAttribPointer(minusLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),gl.drawArrays(gl.TRIANGLES,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;return vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER),fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),gl.FRAGMENT_SHADER),program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader])}}}();
                !function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(edge,source,target,data,i,prefix,settings){var w=(edge[prefix+"size"]||1)/2,x1=source[prefix+"x"],y1=source[prefix+"y"],x2=target[prefix+"x"],y2=target[prefix+"y"],color=edge.color;if(!color)switch(settings("edgeColor")){case"source":color=source.color||settings("defaultNodeColor");break;case"target":color=target.color||settings("defaultNodeColor");break;default:color=settings("defaultEdgeColor")}color=sigma.utils.floatColor(color),data[i++]=x1,data[i++]=y1,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=color},render:function(gl,program,data,params){var buffer,colorLocation=gl.getAttribLocation(program,"a_color"),positionLocation=gl.getAttribLocation(program,"a_position"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix");buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,data,gl.DYNAMIC_DRAW),gl.uniform2f(resolutionLocation,params.width,params.height),gl.uniformMatrix3fv(matrixLocation,!1,params.matrix),gl.enableVertexAttribArray(positionLocation),gl.enableVertexAttribArray(colorLocation),gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),gl.lineWidth(3),gl.drawArrays(gl.LINES,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;return vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER),fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),gl.FRAGMENT_SHADER),program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader])}}}();
                !function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(edge,source,target,data,i,prefix,settings){var w=(edge[prefix+"size"]||1)/2,x1=source[prefix+"x"],y1=source[prefix+"y"],x2=target[prefix+"x"],y2=target[prefix+"y"],targetSize=target[prefix+"size"],color=edge.color;if(!color)switch(settings("edgeColor")){case"source":color=source.color||settings("defaultNodeColor");break;case"target":color=target.color||settings("defaultNodeColor");break;default:color=settings("defaultEdgeColor")}color=sigma.utils.floatColor(color),data[i++]=x1,data[i++]=y1,data[i++]=x2,data[i++]=y2,data[i++]=w,data[i++]=targetSize,data[i++]=0,data[i++]=0,data[i++]=0,data[i++]=0,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=targetSize,data[i++]=1,data[i++]=1,data[i++]=0,data[i++]=0,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=targetSize,data[i++]=1,data[i++]=0,data[i++]=0,data[i++]=0,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=targetSize,data[i++]=1,data[i++]=0,data[i++]=0,data[i++]=0,data[i++]=color,data[i++]=x1,data[i++]=y1,data[i++]=x2,data[i++]=y2,data[i++]=w,data[i++]=targetSize,data[i++]=0,data[i++]=1,data[i++]=0,data[i++]=0,data[i++]=color,data[i++]=x1,data[i++]=y1,data[i++]=x2,data[i++]=y2,data[i++]=w,data[i++]=targetSize,data[i++]=0,data[i++]=0,data[i++]=0,data[i++]=0,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=targetSize,data[i++]=1,data[i++]=0,data[i++]=1,data[i++]=-1,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=targetSize,data[i++]=1,data[i++]=0,data[i++]=1,data[i++]=0,data[i++]=color,data[i++]=x2,data[i++]=y2,data[i++]=x1,data[i++]=y1,data[i++]=w,data[i++]=targetSize,data[i++]=1,data[i++]=0,data[i++]=1,data[i++]=1,data[i++]=color},render:function(gl,program,data,params){var buffer,positionLocation1=gl.getAttribLocation(program,"a_pos1"),positionLocation2=gl.getAttribLocation(program,"a_pos2"),thicknessLocation=gl.getAttribLocation(program,"a_thickness"),targetSizeLocation=gl.getAttribLocation(program,"a_tSize"),delayLocation=gl.getAttribLocation(program,"a_delay"),minusLocation=gl.getAttribLocation(program,"a_minus"),headLocation=gl.getAttribLocation(program,"a_head"),headPositionLocation=gl.getAttribLocation(program,"a_headPosition"),colorLocation=gl.getAttribLocation(program,"a_color"),resolutionLocation=gl.getUniformLocation(program,"u_resolution"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),matrixHalfPiLocation=gl.getUniformLocation(program,"u_matrixHalfPi"),matrixHalfPiMinusLocation=gl.getUniformLocation(program,"u_matrixHalfPiMinus"),ratioLocation=gl.getUniformLocation(program,"u_ratio"),nodeRatioLocation=gl.getUniformLocation(program,"u_nodeRatio"),arrowHeadLocation=gl.getUniformLocation(program,"u_arrowHead"),scaleLocation=gl.getUniformLocation(program,"u_scale");buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,data,gl.STATIC_DRAW),gl.uniform2f(resolutionLocation,params.width,params.height),gl.uniform1f(ratioLocation,params.ratio/Math.pow(params.ratio,params.settings("edgesPowRatio"))),gl.uniform1f(nodeRatioLocation,Math.pow(params.ratio,params.settings("nodesPowRatio"))/params.ratio),gl.uniform1f(arrowHeadLocation,5),gl.uniform1f(scaleLocation,params.scalingRatio),gl.uniformMatrix3fv(matrixLocation,!1,params.matrix),gl.uniformMatrix2fv(matrixHalfPiLocation,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),gl.uniformMatrix2fv(matrixHalfPiMinusLocation,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),gl.enableVertexAttribArray(positionLocation1),gl.enableVertexAttribArray(positionLocation2),gl.enableVertexAttribArray(thicknessLocation),gl.enableVertexAttribArray(targetSizeLocation),gl.enableVertexAttribArray(delayLocation),gl.enableVertexAttribArray(minusLocation),gl.enableVertexAttribArray(headLocation),gl.enableVertexAttribArray(headPositionLocation),gl.enableVertexAttribArray(colorLocation),gl.vertexAttribPointer(positionLocation1,2,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),gl.vertexAttribPointer(positionLocation2,2,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),gl.vertexAttribPointer(thicknessLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),gl.vertexAttribPointer(targetSizeLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),gl.vertexAttribPointer(delayLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),gl.vertexAttribPointer(minusLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),gl.vertexAttribPointer(headLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),gl.vertexAttribPointer(headPositionLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),gl.vertexAttribPointer(colorLocation,1,gl.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),gl.drawArrays(gl.TRIANGLES,params.start||0,params.count||data.length/this.ATTRIBUTES)},initProgram:function(gl){var vertexShader,fragmentShader,program;return vertexShader=sigma.utils.loadShader(gl,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),gl.VERTEX_SHADER),fragmentShader=sigma.utils.loadShader(gl,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),gl.FRAGMENT_SHADER),program=sigma.utils.loadProgram(gl,[vertexShader,fragmentShader])}}}();
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(node,context,settings){var fontSize,prefix=settings("prefix")||"",size=node[prefix+"size"];size<settings("labelThreshold")||node.label&&"string"==typeof node.label&&(fontSize="fixed"===settings("labelSize")?settings("defaultLabelSize"):settings("labelSizeRatio")*size,context.font=(settings("fontStyle")?settings("fontStyle")+" ":"")+fontSize+"px "+settings("font"),context.fillStyle="node"===settings("labelColor")?node.color||settings("defaultNodeColor"):settings("defaultLabelColor"),context.fillText(node.label,Math.round(node[prefix+"x"]+size+3),Math.round(node[prefix+"y"]+fontSize/3)))}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(node,context,settings){var x,y,w,h,e,fontStyle=settings("hoverFontStyle")||settings("fontStyle"),prefix=settings("prefix")||"",size=node[prefix+"size"],fontSize="fixed"===settings("labelSize")?settings("defaultLabelSize"):settings("labelSizeRatio")*size;context.font=(fontStyle?fontStyle+" ":"")+fontSize+"px "+(settings("hoverFont")||settings("font")),context.beginPath(),context.fillStyle="node"===settings("labelHoverBGColor")?node.color||settings("defaultNodeColor"):settings("defaultHoverLabelBGColor"),node.label&&settings("labelHoverShadow")&&(context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowBlur=8,context.shadowColor=settings("labelHoverShadowColor")),node.label&&"string"==typeof node.label&&(x=Math.round(node[prefix+"x"]-fontSize/2-2),y=Math.round(node[prefix+"y"]-fontSize/2-2),w=Math.round(context.measureText(node.label).width+fontSize/2+size+7),h=Math.round(fontSize+4),e=Math.round(fontSize/2+2),context.moveTo(x,y+e),context.arcTo(x,y,x+e,y,e),context.lineTo(x+w,y),context.lineTo(x+w,y+h),context.lineTo(x+e,y+h),context.arcTo(x,y+h,x,y+h-e,e),context.lineTo(x,y+e),context.closePath(),context.fill(),context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowBlur=0),settings("borderSize")>0&&(context.beginPath(),context.fillStyle="node"===settings("nodeBorderColor")?node.color||settings("defaultNodeColor"):settings("defaultNodeBorderColor"),context.arc(node[prefix+"x"],node[prefix+"y"],size+settings("borderSize"),0,2*Math.PI,!0),context.closePath(),context.fill());var nodeRenderer=sigma.canvas.nodes[node.type]||sigma.canvas.nodes.def;nodeRenderer(node,context,settings),node.label&&"string"==typeof node.label&&(context.fillStyle="node"===settings("labelHoverColor")?node.color||settings("defaultNodeColor"):settings("defaultLabelHoverColor"),context.fillText(node.label,Math.round(node[prefix+"x"]+size+3),Math.round(node[prefix+"y"]+fontSize/3)))}}).call(this);
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(node,context,settings){var prefix=settings("prefix")||"";context.fillStyle=node.color||settings("defaultNodeColor"),context.beginPath(),context.arc(node[prefix+"x"],node[prefix+"y"],node[prefix+"size"],0,2*Math.PI,!0),context.closePath(),context.fill()}}();
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",size=edge[prefix+"size"]||1,edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor");if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}context.strokeStyle=color,context.lineWidth=size,context.beginPath(),context.moveTo(source[prefix+"x"],source[prefix+"y"]),context.lineTo(target[prefix+"x"],target[prefix+"y"]),context.stroke()}}();
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",size=edge[prefix+"size"]||1,edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),cp={},sSize=source[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"];if(cp=source.id===target.id?sigma.utils.getSelfLoopControlPoints(sX,sY,sSize):sigma.utils.getQuadraticControlPoint(sX,sY,tX,tY),!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}context.strokeStyle=color,context.lineWidth=size,context.beginPath(),context.moveTo(sX,sY),source.id===target.id?context.bezierCurveTo(cp.x1,cp.y1,cp.x2,cp.y2,tX,tY):context.quadraticCurveTo(cp.x,cp.y,tX,tY),context.stroke()}}();
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),size=edge[prefix+"size"]||1,tSize=target[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"],aSize=Math.max(2.5*size,settings("minArrowSize")),d=Math.sqrt(Math.pow(tX-sX,2)+Math.pow(tY-sY,2)),aX=sX+(tX-sX)*(d-aSize-tSize)/d,aY=sY+(tY-sY)*(d-aSize-tSize)/d,vX=(tX-sX)*aSize/d,vY=(tY-sY)*aSize/d;if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}context.strokeStyle=color,context.lineWidth=size,context.beginPath(),context.moveTo(sX,sY),context.lineTo(aX,aY),context.stroke(),context.fillStyle=color,context.beginPath(),context.moveTo(aX+vX,aY+vY),context.lineTo(aX+.6*vY,aY-.6*vX),context.lineTo(aX-.6*vY,aY+.6*vX),context.lineTo(aX+vX,aY+vY),context.closePath(),context.fill()}}();
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),cp={},size=edge[prefix+"size"]||1,tSize=target[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"],aSize=Math.max(2.5*size,settings("minArrowSize")),d,aX,aY,vX,vY;if(cp=source.id===target.id?sigma.utils.getSelfLoopControlPoints(sX,sY,tSize):sigma.utils.getQuadraticControlPoint(sX,sY,tX,tY),source.id===target.id?(d=Math.sqrt(Math.pow(tX-cp.x1,2)+Math.pow(tY-cp.y1,2)),aX=cp.x1+(tX-cp.x1)*(d-aSize-tSize)/d,aY=cp.y1+(tY-cp.y1)*(d-aSize-tSize)/d,vX=(tX-cp.x1)*aSize/d,vY=(tY-cp.y1)*aSize/d):(d=Math.sqrt(Math.pow(tX-cp.x,2)+Math.pow(tY-cp.y,2)),aX=cp.x+(tX-cp.x)*(d-aSize-tSize)/d,aY=cp.y+(tY-cp.y)*(d-aSize-tSize)/d,vX=(tX-cp.x)*aSize/d,vY=(tY-cp.y)*aSize/d),!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}context.strokeStyle=color,context.lineWidth=size,context.beginPath(),context.moveTo(sX,sY),source.id===target.id?context.bezierCurveTo(cp.x2,cp.y2,cp.x1,cp.y1,aX,aY):context.quadraticCurveTo(cp.x,cp.y,aX,aY),context.stroke(),context.fillStyle=color,context.beginPath(),context.moveTo(aX+vX,aY+vY),context.lineTo(aX+.6*vY,aY-.6*vX),context.lineTo(aX-.6*vY,aY+.6*vX),context.lineTo(aX+vX,aY+vY),context.closePath(),context.fill()}}();
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",size=edge[prefix+"size"]||1,edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor");if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}color="edge"===settings("edgeHoverColor")?edge.hover_color||color:edge.hover_color||settings("defaultEdgeHoverColor")||color,size*=settings("edgeHoverSizeRatio"),context.strokeStyle=color,context.lineWidth=size,context.beginPath(),context.moveTo(source[prefix+"x"],source[prefix+"y"]),context.lineTo(target[prefix+"x"],target[prefix+"y"]),context.stroke()}}();
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",size=settings("edgeHoverSizeRatio")*(edge[prefix+"size"]||1),edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),cp={},sSize=source[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"];if(cp=source.id===target.id?sigma.utils.getSelfLoopControlPoints(sX,sY,sSize):sigma.utils.getQuadraticControlPoint(sX,sY,tX,tY),!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}color="edge"===settings("edgeHoverColor")?edge.hover_color||color:edge.hover_color||settings("defaultEdgeHoverColor")||color,context.strokeStyle=color,context.lineWidth=size,context.beginPath(),context.moveTo(sX,sY),source.id===target.id?context.bezierCurveTo(cp.x1,cp.y1,cp.x2,cp.y2,tX,tY):context.quadraticCurveTo(cp.x,cp.y,tX,tY),context.stroke()}}();
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),size=edge[prefix+"size"]||1,tSize=target[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"];size=edge.hover?settings("edgeHoverSizeRatio")*size:size;var aSize=2.5*size,d=Math.sqrt(Math.pow(tX-sX,2)+Math.pow(tY-sY,2)),aX=sX+(tX-sX)*(d-aSize-tSize)/d,aY=sY+(tY-sY)*(d-aSize-tSize)/d,vX=(tX-sX)*aSize/d,vY=(tY-sY)*aSize/d;if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}color="edge"===settings("edgeHoverColor")?edge.hover_color||color:edge.hover_color||settings("defaultEdgeHoverColor")||color,context.strokeStyle=color,context.lineWidth=size,context.beginPath(),context.moveTo(sX,sY),context.lineTo(aX,aY),context.stroke(),context.fillStyle=color,context.beginPath(),context.moveTo(aX+vX,aY+vY),context.lineTo(aX+.6*vY,aY-.6*vX),context.lineTo(aX-.6*vY,aY+.6*vX),context.lineTo(aX+vX,aY+vY),context.closePath(),context.fill()}}();
                !function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(edge,source,target,context,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor"),cp={},size=settings("edgeHoverSizeRatio")*(edge[prefix+"size"]||1),tSize=target[prefix+"size"],sX=source[prefix+"x"],sY=source[prefix+"y"],tX=target[prefix+"x"],tY=target[prefix+"y"],d,aSize,aX,aY,vX,vY;if(cp=source.id===target.id?sigma.utils.getSelfLoopControlPoints(sX,sY,tSize):sigma.utils.getQuadraticControlPoint(sX,sY,tX,tY),source.id===target.id?(d=Math.sqrt(Math.pow(tX-cp.x1,2)+Math.pow(tY-cp.y1,2)),aSize=2.5*size,aX=cp.x1+(tX-cp.x1)*(d-aSize-tSize)/d,aY=cp.y1+(tY-cp.y1)*(d-aSize-tSize)/d,vX=(tX-cp.x1)*aSize/d,vY=(tY-cp.y1)*aSize/d):(d=Math.sqrt(Math.pow(tX-cp.x,2)+Math.pow(tY-cp.y,2)),aSize=2.5*size,aX=cp.x+(tX-cp.x)*(d-aSize-tSize)/d,aY=cp.y+(tY-cp.y)*(d-aSize-tSize)/d,vX=(tX-cp.x)*aSize/d,vY=(tY-cp.y)*aSize/d),!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}color="edge"===settings("edgeHoverColor")?edge.hover_color||color:edge.hover_color||settings("defaultEdgeHoverColor")||color,context.strokeStyle=color,context.lineWidth=size,context.beginPath(),context.moveTo(sX,sY),source.id===target.id?context.bezierCurveTo(cp.x2,cp.y2,cp.x1,cp.y1,aX,aY):context.quadraticCurveTo(cp.x,cp.y,aX,aY),context.stroke(),context.fillStyle=color,context.beginPath(),context.moveTo(aX+vX,aY+vY),context.lineTo(aX+.6*vY,aY-.6*vX),context.lineTo(aX-.6*vY,aY+.6*vX),context.lineTo(aX+vX,aY+vY),context.closePath(),context.fill()}}();
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(edge,source,target,context,settings){(sigma.canvas.hovers[source.type]||sigma.canvas.hovers.def)(source,context,settings),(sigma.canvas.hovers[target.type]||sigma.canvas.hovers.def)(target,context,settings)}}).call(this);
                !function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(element){return element.style.display="",this},hide:function(element){return element.style.display="none",this}}}();
                !function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(node,settings){var prefix=settings("prefix")||"",circle=document.createElementNS(settings("xmlns"),"circle");return circle.setAttributeNS(null,"data-node-id",node.id),circle.setAttributeNS(null,"class",settings("classPrefix")+"-node"),circle.setAttributeNS(null,"fill",node.color||settings("defaultNodeColor")),circle},update:function(node,circle,settings){var prefix=settings("prefix")||"";return circle.setAttributeNS(null,"cx",node[prefix+"x"]),circle.setAttributeNS(null,"cy",node[prefix+"y"]),circle.setAttributeNS(null,"r",node[prefix+"size"]),settings("freeStyle")||circle.setAttributeNS(null,"fill",node.color||settings("defaultNodeColor")),circle.style.display="",this}}}();
                !function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(edge,source,target,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor");if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}var line=document.createElementNS(settings("xmlns"),"line");return line.setAttributeNS(null,"data-edge-id",edge.id),line.setAttributeNS(null,"class",settings("classPrefix")+"-edge"),line.setAttributeNS(null,"stroke",color),line},update:function(edge,line,source,target,settings){var prefix=settings("prefix")||"";return line.setAttributeNS(null,"stroke-width",edge[prefix+"size"]||1),line.setAttributeNS(null,"x1",source[prefix+"x"]),line.setAttributeNS(null,"y1",source[prefix+"y"]),line.setAttributeNS(null,"x2",target[prefix+"x"]),line.setAttributeNS(null,"y2",target[prefix+"y"]),line.style.display="",this}}}();
                !function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(edge,source,target,settings){var color=edge.color,prefix=settings("prefix")||"",edgeColor=settings("edgeColor"),defaultNodeColor=settings("defaultNodeColor"),defaultEdgeColor=settings("defaultEdgeColor");if(!color)switch(edgeColor){case"source":color=source.color||defaultNodeColor;break;case"target":color=target.color||defaultNodeColor;break;default:color=defaultEdgeColor}var path=document.createElementNS(settings("xmlns"),"path");return path.setAttributeNS(null,"data-edge-id",edge.id),path.setAttributeNS(null,"class",settings("classPrefix")+"-edge"),path.setAttributeNS(null,"stroke",color),path},update:function(edge,path,source,target,settings){var prefix=settings("prefix")||"";path.setAttributeNS(null,"stroke-width",edge[prefix+"size"]||1);var cx=(source[prefix+"x"]+target[prefix+"x"])/2+(target[prefix+"y"]-source[prefix+"y"])/4,cy=(source[prefix+"y"]+target[prefix+"y"])/2+(source[prefix+"x"]-target[prefix+"x"])/4,p="M"+source[prefix+"x"]+","+source[prefix+"y"]+" Q"+cx+","+cy+" "+target[prefix+"x"]+","+target[prefix+"y"];return path.setAttributeNS(null,"d",p),path.setAttributeNS(null,"fill","none"),path.style.display="",this}}}();
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(node,settings){var prefix=settings("prefix")||"",size=node[prefix+"size"],text=document.createElementNS(settings("xmlns"),"text"),fontSize="fixed"===settings("labelSize")?settings("defaultLabelSize"):settings("labelSizeRatio")*size,fontColor="node"===settings("labelColor")?node.color||settings("defaultNodeColor"):settings("defaultLabelColor");return text.setAttributeNS(null,"data-label-target",node.id),text.setAttributeNS(null,"class",settings("classPrefix")+"-label"),text.setAttributeNS(null,"font-size",fontSize),text.setAttributeNS(null,"font-family",settings("font")),text.setAttributeNS(null,"fill",fontColor),text.innerHTML=node.label,text.textContent=node.label,text},update:function(node,text,settings){var prefix=settings("prefix")||"",size=node[prefix+"size"],fontSize="fixed"===settings("labelSize")?settings("defaultLabelSize"):settings("labelSizeRatio")*size;if((settings("forceLabels")||!(size<settings("labelThreshold")))&&"string"==typeof node.label)return text.setAttributeNS(null,"x",Math.round(node[prefix+"x"]+size+3)),text.setAttributeNS(null,"y",Math.round(node[prefix+"y"]+fontSize/3)),text.style.display="",this}}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(node,nodeCircle,measurementCanvas,settings){var x,y,w,h,e,d,fontStyle=settings("hoverFontStyle")||settings("fontStyle"),prefix=settings("prefix")||"",size=node[prefix+"size"],fontSize="fixed"===settings("labelSize")?settings("defaultLabelSize"):settings("labelSizeRatio")*size,fontColor="node"===settings("labelHoverColor")?node.color||settings("defaultNodeColor"):settings("defaultLabelHoverColor"),group=document.createElementNS(settings("xmlns"),"g"),rectangle=document.createElementNS(settings("xmlns"),"rect"),circle=document.createElementNS(settings("xmlns"),"circle"),text=document.createElementNS(settings("xmlns"),"text");return group.setAttributeNS(null,"class",settings("classPrefix")+"-hover"),group.setAttributeNS(null,"data-node-id",node.id),"string"==typeof node.label&&(text.innerHTML=node.label,text.textContent=node.label,text.setAttributeNS(null,"class",settings("classPrefix")+"-hover-label"),text.setAttributeNS(null,"font-size",fontSize),text.setAttributeNS(null,"font-family",settings("font")),text.setAttributeNS(null,"fill",fontColor),text.setAttributeNS(null,"x",Math.round(node[prefix+"x"]+size+3)),text.setAttributeNS(null,"y",Math.round(node[prefix+"y"]+fontSize/3)),x=Math.round(node[prefix+"x"]-fontSize/2-2),y=Math.round(node[prefix+"y"]-fontSize/2-2),w=Math.round(measurementCanvas.measureText(node.label).width+fontSize/2+size+9),h=Math.round(fontSize+4),e=Math.round(fontSize/2+2),circle.setAttributeNS(null,"class",settings("classPrefix")+"-hover-area"),circle.setAttributeNS(null,"fill","#fff"),circle.setAttributeNS(null,"cx",node[prefix+"x"]),circle.setAttributeNS(null,"cy",node[prefix+"y"]),circle.setAttributeNS(null,"r",e),rectangle.setAttributeNS(null,"class",settings("classPrefix")+"-hover-area"),rectangle.setAttributeNS(null,"fill","#fff"),rectangle.setAttributeNS(null,"x",node[prefix+"x"]+e/4),rectangle.setAttributeNS(null,"y",node[prefix+"y"]-e),rectangle.setAttributeNS(null,"width",w),rectangle.setAttributeNS(null,"height",h)),group.appendChild(circle),group.appendChild(rectangle),group.appendChild(text),group.appendChild(nodeCircle),group}}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(readPrefix,writePrefix,options){var i,l,a,b,c,d,scale,margin,n=this.graph.nodes(),e=this.graph.edges(),settings=this.settings.embedObjects(options||{}),bounds=settings("bounds")||sigma.utils.getBoundaries(this.graph,readPrefix,!0),minX=bounds.minX,minY=bounds.minY,maxX=bounds.maxX,maxY=bounds.maxY,sizeMax=bounds.sizeMax,weightMax=bounds.weightMax,w=settings("width")||1,h=settings("height")||1,rescaleSettings=settings("autoRescale"),validSettings={nodePosition:1,nodeSize:1,edgeSize:1};for(rescaleSettings instanceof Array||(rescaleSettings=["nodePosition","nodeSize","edgeSize"]),i=0,l=rescaleSettings.length;i<l;i++)if(!validSettings[rescaleSettings[i]])throw new Error('The rescale setting "'+rescaleSettings[i]+'" is not recognized.');var np=~rescaleSettings.indexOf("nodePosition"),ns=~rescaleSettings.indexOf("nodeSize"),es=~rescaleSettings.indexOf("edgeSize");for(scale="outside"===settings("scalingMode")?Math.max(w/Math.max(maxX-minX,1),h/Math.max(maxY-minY,1)):Math.min(w/Math.max(maxX-minX,1),h/Math.max(maxY-minY,1)),margin=(settings("rescaleIgnoreSize")?0:(settings("maxNodeSize")||sizeMax)/scale)+(settings("sideMargin")||0),maxX+=margin,minX-=margin,maxY+=margin,minY-=margin,scale="outside"===settings("scalingMode")?Math.max(w/Math.max(maxX-minX,1),h/Math.max(maxY-minY,1)):Math.min(w/Math.max(maxX-minX,1),h/Math.max(maxY-minY,1)),settings("maxNodeSize")||settings("minNodeSize")?settings("maxNodeSize")===settings("minNodeSize")?(a=0,b=+settings("maxNodeSize")):(a=(settings("maxNodeSize")-settings("minNodeSize"))/sizeMax,b=+settings("minNodeSize")):(a=1,b=0),settings("maxEdgeSize")||settings("minEdgeSize")?settings("maxEdgeSize")===settings("minEdgeSize")?(c=0,d=+settings("minEdgeSize")):(c=(settings("maxEdgeSize")-settings("minEdgeSize"))/weightMax,d=+settings("minEdgeSize")):(c=1,d=0),i=0,l=e.length;i<l;i++)e[i][writePrefix+"size"]=e[i][readPrefix+"size"]*(es?c:1)+(es?d:0);for(i=0,l=n.length;i<l;i++)n[i][writePrefix+"size"]=n[i][readPrefix+"size"]*(ns?a:1)+(ns?b:0),n[i][writePrefix+"x"]=(n[i][readPrefix+"x"]-(maxX+minX)/2)*(np?scale:1),n[i][writePrefix+"y"]=(n[i][readPrefix+"y"]-(maxY+minY)/2)*(np?scale:1)},sigma.utils.getBoundaries=function(graph,prefix,doEdges){var i,l,e=graph.edges(),n=graph.nodes(),weightMax=-(1/0),sizeMax=-(1/0),minX=1/0,minY=1/0,maxX=-(1/0),maxY=-(1/0);if(doEdges)for(i=0,l=e.length;i<l;i++)weightMax=Math.max(e[i][prefix+"size"],weightMax);for(i=0,l=n.length;i<l;i++)sizeMax=Math.max(n[i][prefix+"size"],sizeMax),maxX=Math.max(n[i][prefix+"x"],maxX),minX=Math.min(n[i][prefix+"x"],minX),maxY=Math.max(n[i][prefix+"y"],maxY),minY=Math.min(n[i][prefix+"y"],minY);return weightMax=weightMax||1,sizeMax=sizeMax||1,{weightMax:weightMax,sizeMax:sizeMax,minX:minX,minY:minY,maxX:maxX,maxY:maxY}}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(readPrefix,writePrefix){var i,l,a;if(writePrefix+""!=readPrefix+""){for(a=this.graph.nodes(),i=0,l=a.length;i<l;i++)a[i][writePrefix+"x"]=a[i][readPrefix+"x"],a[i][writePrefix+"y"]=a[i][readPrefix+"y"],a[i][writePrefix+"size"]=a[i][readPrefix+"size"];for(a=this.graph.edges(),i=0,l=a.length;i<l;i++)a[i][writePrefix+"size"]=a[i][readPrefix+"size"]}}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var _getID=function(){var id=0;return function(){return""+ ++id}}();sigma.misc.animation.camera=function(camera,val,options){if(!(camera instanceof sigma.classes.camera&&"object"==typeof val&&val))throw"animation.camera: Wrong arguments.";if("number"!=typeof val.x&&"number"!=typeof val.y&&"number"!=typeof val.ratio&&"number"!=typeof val.angle)throw"There must be at least one valid coordinate in the given val.";var fn,id,anim,easing,duration,initialVal,o=options||{},start=sigma.utils.dateNow();return initialVal={x:camera.x,y:camera.y,ratio:camera.ratio,angle:camera.angle},duration=o.duration,easing="function"!=typeof o.easing?sigma.utils.easings[o.easing||"quadraticInOut"]:o.easing,fn=function(){var coef,t=o.duration?(sigma.utils.dateNow()-start)/o.duration:1;t>=1?(camera.isAnimated=!1,camera.goTo({x:val.x!==undefined?val.x:initialVal.x,y:val.y!==undefined?val.y:initialVal.y,ratio:val.ratio!==undefined?val.ratio:initialVal.ratio,angle:val.angle!==undefined?val.angle:initialVal.angle}),cancelAnimationFrame(id),delete sigma.misc.animation.running[id],"function"==typeof o.onComplete&&o.onComplete()):(coef=easing(t),camera.isAnimated=!0,camera.goTo({x:val.x!==undefined?initialVal.x+(val.x-initialVal.x)*coef:initialVal.x,y:val.y!==undefined?initialVal.y+(val.y-initialVal.y)*coef:initialVal.y,ratio:val.ratio!==undefined?initialVal.ratio+(val.ratio-initialVal.ratio)*coef:initialVal.ratio,angle:val.angle!==undefined?initialVal.angle+(val.angle-initialVal.angle)*coef:initialVal.angle}),"function"==typeof o.onNewFrame&&o.onNewFrame(),anim.frameId=requestAnimationFrame(fn))},id=_getID(),anim={frameId:requestAnimationFrame(fn),target:camera,type:"camera",options:o,fn:fn},sigma.misc.animation.running[id]=anim,id},sigma.misc.animation.kill=function(id){if(1!==arguments.length||"number"!=typeof id)throw"animation.kill: Wrong arguments.";var o=sigma.misc.animation.running[id];return o&&(cancelAnimationFrame(id),delete sigma.misc.animation.running[o.frameId],"camera"===o.type&&(o.target.isAnimated=!1),"function"==typeof(o.options||{}).onComplete&&o.options.onComplete()),this},sigma.misc.animation.killAll=function(filter){var o,id,count=0,type="string"==typeof filter?filter:null,target="object"==typeof filter?filter:null,running=sigma.misc.animation.running;for(id in running)type&&running[id].type!==type||target&&running[id].target!==target||(o=sigma.misc.animation.running[id],cancelAnimationFrame(o.frameId),delete sigma.misc.animation.running[id],"camera"===o.type&&(o.target.isAnimated=!1),count++,"function"==typeof(o.options||{}).onComplete&&o.options.onComplete());return count},sigma.misc.animation.has=function(filter){var id,type="string"==typeof filter?filter:null,target="object"==typeof filter?filter:null,running=sigma.misc.animation.running;for(id in running)if(!(type&&running[id].type!==type||target&&running[id].target!==target))return!0;return!1}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(prefix){function getNodes(e){e&&(mX="x"in e.data?e.data.x:mX,mY="y"in e.data?e.data.y:mY);var i,j,l,n,x,y,s,inserted,selected=[],modifiedX=mX+self.width/2,modifiedY=mY+self.height/2,point=self.camera.cameraPosition(mX,mY),nodes=self.camera.quadtree.point(point.x,point.y);if(nodes.length)for(i=0,l=nodes.length;i<l;i++)if(n=nodes[i],x=n[prefix+"x"],y=n[prefix+"y"],s=n[prefix+"size"],!n.hidden&&modifiedX>x-s&&modifiedX<x+s&&modifiedY>y-s&&modifiedY<y+s&&Math.sqrt(Math.pow(modifiedX-x,2)+Math.pow(modifiedY-y,2))<s){for(inserted=!1,j=0;j<selected.length;j++)if(n.size>selected[j].size){selected.splice(j,0,n),inserted=!0;break}inserted||selected.push(n)}return selected}function getEdges(e){function insertEdge(selected,edge){for(inserted=!1,j=0;j<selected.length;j++)if(edge.size>selected[j].size){selected.splice(j,0,edge),inserted=!0;break}inserted||selected.push(edge)}if(!self.settings("enableEdgeHovering"))return[];var isCanvas=sigma.renderers.canvas&&self instanceof sigma.renderers.canvas;if(!isCanvas)throw new Error("The edge events feature is not compatible with the WebGL renderer");e&&(mX="x"in e.data?e.data.x:mX,mY="y"in e.data?e.data.y:mY);var i,j,l,a,edge,s,maxEpsilon=self.settings("edgeHoverPrecision"),source,target,cp,nodeIndex={},inserted,selected=[],modifiedX=mX+self.width/2,modifiedY=mY+self.height/2,point=self.camera.cameraPosition(mX,mY),edges=[];if(isCanvas){var nodesOnScreen=self.camera.quadtree.area(self.camera.getRectangle(self.width,self.height));for(a=nodesOnScreen,i=0,l=a.length;i<l;i++)nodeIndex[a[i].id]=a[i]}if(self.camera.edgequadtree!==undefined&&(edges=self.camera.edgequadtree.point(point.x,point.y)),edges.length)for(i=0,l=edges.length;i<l;i++)edge=edges[i],source=self.graph.nodes(edge.source),target=self.graph.nodes(edge.target),s=edge[prefix+"size"]||edge["read_"+prefix+"size"],!edge.hidden&&!source.hidden&&!target.hidden&&(!isCanvas||nodeIndex[edge.source]||nodeIndex[edge.target])&&sigma.utils.getDistance(source[prefix+"x"],source[prefix+"y"],modifiedX,modifiedY)>source[prefix+"size"]&&sigma.utils.getDistance(target[prefix+"x"],target[prefix+"y"],modifiedX,modifiedY)>target[prefix+"size"]&&("curve"==edge.type||"curvedArrow"==edge.type?source.id===target.id?(cp=sigma.utils.getSelfLoopControlPoints(source[prefix+"x"],source[prefix+"y"],source[prefix+"size"]),sigma.utils.isPointOnBezierCurve(modifiedX,modifiedY,source[prefix+"x"],source[prefix+"y"],target[prefix+"x"],target[prefix+"y"],cp.x1,cp.y1,cp.x2,cp.y2,Math.max(s,maxEpsilon))&&insertEdge(selected,edge)):(cp=sigma.utils.getQuadraticControlPoint(source[prefix+"x"],source[prefix+"y"],target[prefix+"x"],target[prefix+"y"]),sigma.utils.isPointOnQuadraticCurve(modifiedX,modifiedY,source[prefix+"x"],source[prefix+"y"],target[prefix+"x"],target[prefix+"y"],cp.x,cp.y,Math.max(s,maxEpsilon))&&insertEdge(selected,edge)):sigma.utils.isPointOnSegment(modifiedX,modifiedY,source[prefix+"x"],source[prefix+"y"],target[prefix+"x"],target[prefix+"y"],Math.max(s,maxEpsilon))&&insertEdge(selected,edge));return selected}function bindCaptor(captor){function onClick(e){self.settings("eventsEnabled")&&(self.dispatchEvent("click",e.data),nodes=getNodes(e),edges=getEdges(e),nodes.length?(self.dispatchEvent("clickNode",{node:nodes[0],captor:e.data}),self.dispatchEvent("clickNodes",{node:nodes,captor:e.data})):edges.length?(self.dispatchEvent("clickEdge",{edge:edges[0],captor:e.data}),self.dispatchEvent("clickEdges",{edge:edges,captor:e.data})):self.dispatchEvent("clickStage",{captor:e.data}))}function onDoubleClick(e){self.settings("eventsEnabled")&&(self.dispatchEvent("doubleClick",e.data),nodes=getNodes(e),edges=getEdges(e),nodes.length?(self.dispatchEvent("doubleClickNode",{node:nodes[0],captor:e.data}),self.dispatchEvent("doubleClickNodes",{node:nodes,captor:e.data})):edges.length?(self.dispatchEvent("doubleClickEdge",{edge:edges[0],captor:e.data}),self.dispatchEvent("doubleClickEdges",{edge:edges,captor:e.data})):self.dispatchEvent("doubleClickStage",{captor:e.data}))}function onRightClick(e){self.settings("eventsEnabled")&&(self.dispatchEvent("rightClick",e.data),nodes=getNodes(e),edges=getEdges(e),nodes.length?(self.dispatchEvent("rightClickNode",{node:nodes[0],captor:e.data}),self.dispatchEvent("rightClickNodes",{node:nodes,captor:e.data})):edges.length?(self.dispatchEvent("rightClickEdge",{edge:edges[0],captor:e.data}),self.dispatchEvent("rightClickEdges",{edge:edges,captor:e.data})):self.dispatchEvent("rightClickStage",{captor:e.data}))}function onOut(e){if(self.settings("eventsEnabled")){var k,i,l,le,outNodes=[],outEdges=[];for(k in overNodes)outNodes.push(overNodes[k]);for(overNodes={},i=0,l=outNodes.length;i<l;i++)self.dispatchEvent("outNode",{node:outNodes[i],captor:e.data});for(outNodes.length&&self.dispatchEvent("outNodes",{nodes:outNodes,captor:e.data}),overEdges={},i=0,le=outEdges.length;i<le;i++)self.dispatchEvent("outEdge",{edge:outEdges[i],captor:e.data});outEdges.length&&self.dispatchEvent("outEdges",{edges:outEdges,captor:e.data})}}function onMove(e){if(self.settings("eventsEnabled")){nodes=getNodes(e),edges=getEdges(e);var i,k,node,edge,newOutNodes=[],newOverNodes=[],currentOverNodes={},l=nodes.length,newOutEdges=[],newOverEdges=[],currentOverEdges={},le=edges.length;for(i=0;i<l;i++)node=nodes[i],currentOverNodes[node.id]=node,overNodes[node.id]||(newOverNodes.push(node),overNodes[node.id]=node);for(k in overNodes)currentOverNodes[k]||(newOutNodes.push(overNodes[k]),delete overNodes[k]);for(i=0,l=newOverNodes.length;i<l;i++)self.dispatchEvent("overNode",{node:newOverNodes[i],captor:e.data});for(i=0,l=newOutNodes.length;i<l;i++)self.dispatchEvent("outNode",{node:newOutNodes[i],captor:e.data});for(newOverNodes.length&&self.dispatchEvent("overNodes",{nodes:newOverNodes,captor:e.data}),newOutNodes.length&&self.dispatchEvent("outNodes",{nodes:newOutNodes,captor:e.data}),i=0;i<le;i++)edge=edges[i],currentOverEdges[edge.id]=edge,overEdges[edge.id]||(newOverEdges.push(edge),overEdges[edge.id]=edge);for(k in overEdges)currentOverEdges[k]||(newOutEdges.push(overEdges[k]),delete overEdges[k]);for(i=0,le=newOverEdges.length;i<le;i++)self.dispatchEvent("overEdge",{edge:newOverEdges[i],captor:e.data});for(i=0,le=newOutEdges.length;i<le;i++)self.dispatchEvent("outEdge",{edge:newOutEdges[i],captor:e.data});newOverEdges.length&&self.dispatchEvent("overEdges",{edges:newOverEdges,captor:e.data}),newOutEdges.length&&self.dispatchEvent("outEdges",{edges:newOutEdges,captor:e.data})}}var nodes,edges,overNodes={},overEdges={};captor.bind("click",onClick),captor.bind("mousedown",onMove),captor.bind("mouseup",onMove),captor.bind("mousemove",onMove),captor.bind("mouseout",onOut),captor.bind("doubleclick",onDoubleClick),captor.bind("rightclick",onRightClick),self.bind("render",onMove)}var i,l,mX,mY,captor,self=this;for(i=0,l=this.captors.length;i<l;i++)bindCaptor(this.captors[i])}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(container){function Element(domElement){this.attr=function(attrName){return domElement.getAttributeNS(null,attrName)},this.tag=domElement.tagName,this.class=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this.class.indexOf(self.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this.class.indexOf(self.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this.class.indexOf(self.settings("classPrefix")+"-hover")}}function click(e){if(self.settings("eventsEnabled")){self.dispatchEvent("click",e);var element=new Element(e.target);element.isNode()?self.dispatchEvent("clickNode",{node:graph.nodes(element.attr("data-node-id"))}):self.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function doubleClick(e){if(self.settings("eventsEnabled")){self.dispatchEvent("doubleClick",e);var element=new Element(e.target);element.isNode()?self.dispatchEvent("doubleClickNode",{node:graph.nodes(element.attr("data-node-id"))}):self.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}function onOver(e){var target=e.toElement||e.target;if(self.settings("eventsEnabled")&&target){var el=new Element(target);if(el.isNode())self.dispatchEvent("overNode",{node:graph.nodes(el.attr("data-node-id"))});else if(el.isEdge()){var edge=graph.edges(el.attr("data-edge-id"));self.dispatchEvent("overEdge",{edge:edge,source:graph.nodes(edge.source),target:graph.nodes(edge.target)})}}}function onOut(e){var target=e.fromElement||e.originalTarget;if(self.settings("eventsEnabled")){var el=new Element(target);if(el.isNode())self.dispatchEvent("outNode",{node:graph.nodes(el.attr("data-node-id"))});else if(el.isEdge()){var edge=graph.edges(el.attr("data-edge-id"));self.dispatchEvent("outEdge",{edge:edge,source:graph.nodes(edge.source),target:graph.nodes(edge.target)})}}}var self=this,graph=this.graph;container.addEventListener("click",click,!1),sigma.utils.doubleClick(container,"click",doubleClick),container.addEventListener("touchstart",click,!1),sigma.utils.doubleClick(container,"touchstart",doubleClick),container.addEventListener("mouseover",onOver,!0),container.addEventListener("mouseout",onOut,!0)}}).call(this);
                (function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(prefix){function draw(){var k,source,target,hoveredNode,hoveredEdge,c=self.contexts.hover.canvas,defaultNodeType=self.settings("defaultNodeType"),defaultEdgeType=self.settings("defaultEdgeType"),nodeRenderers=sigma.canvas.hovers,edgeRenderers=sigma.canvas.edgehovers,extremitiesRenderers=sigma.canvas.extremities,embedSettings=self.settings.embedObjects({prefix:prefix});if(self.contexts.hover.clearRect(0,0,c.width,c.height),embedSettings("enableHovering")&&embedSettings("singleHover")&&Object.keys(hoveredNodes).length&&(hoveredNode=hoveredNodes[Object.keys(hoveredNodes)[0]],(nodeRenderers[hoveredNode.type]||nodeRenderers[defaultNodeType]||nodeRenderers.def)(hoveredNode,self.contexts.hover,embedSettings)),embedSettings("enableHovering")&&!embedSettings("singleHover"))for(k in hoveredNodes)(nodeRenderers[hoveredNodes[k].type]||nodeRenderers[defaultNodeType]||nodeRenderers.def)(hoveredNodes[k],self.contexts.hover,embedSettings);if(embedSettings("enableEdgeHovering")&&embedSettings("singleHover")&&Object.keys(hoveredEdges).length&&(hoveredEdge=hoveredEdges[Object.keys(hoveredEdges)[0]],source=self.graph.nodes(hoveredEdge.source),target=self.graph.nodes(hoveredEdge.target),hoveredEdge.hidden||((edgeRenderers[hoveredEdge.type]||edgeRenderers[defaultEdgeType]||edgeRenderers.def)(hoveredEdge,source,target,self.contexts.hover,embedSettings),embedSettings("edgeHoverExtremities")?(extremitiesRenderers[hoveredEdge.type]||extremitiesRenderers.def)(hoveredEdge,source,target,self.contexts.hover,embedSettings):((sigma.canvas.nodes[source.type]||sigma.canvas.nodes.def)(source,self.contexts.hover,embedSettings),(sigma.canvas.nodes[target.type]||sigma.canvas.nodes.def)(target,self.contexts.hover,embedSettings)))),embedSettings("enableEdgeHovering")&&!embedSettings("singleHover"))for(k in hoveredEdges)hoveredEdge=hoveredEdges[k],source=self.graph.nodes(hoveredEdge.source),target=self.graph.nodes(hoveredEdge.target),hoveredEdge.hidden||((edgeRenderers[hoveredEdge.type]||edgeRenderers[defaultEdgeType]||edgeRenderers.def)(hoveredEdge,source,target,self.contexts.hover,embedSettings),embedSettings("edgeHoverExtremities")?(extremitiesRenderers[hoveredEdge.type]||extremitiesRenderers.def)(hoveredEdge,source,target,self.contexts.hover,embedSettings):((sigma.canvas.nodes[source.type]||sigma.canvas.nodes.def)(source,self.contexts.hover,embedSettings),(sigma.canvas.nodes[target.type]||sigma.canvas.nodes.def)(target,self.contexts.hover,embedSettings)))}var self=this,hoveredNodes={},hoveredEdges={};this.bind("overNode",function(event){var node=event.data.node;node.hidden||(hoveredNodes[node.id]=node,draw())}),this.bind("outNode",function(event){delete hoveredNodes[event.data.node.id],draw()}),this.bind("overEdge",function(event){var edge=event.data.edge;edge.hidden||(hoveredEdges[edge.id]=edge,draw())}),this.bind("outEdge",function(event){delete hoveredEdges[event.data.edge.id],draw()}),this.bind("render",function(event){draw()})}}).call(this);
                (function(){"use strict";function DragNodes(s,renderer){function calculateOffset(element){var style=window.getComputedStyle(element),getCssProperty=function(prop){return parseInt(style.getPropertyValue(prop).replace("px",""))||0};return{left:element.getBoundingClientRect().left+getCssProperty("padding-left"),top:element.getBoundingClientRect().top+getCssProperty("padding-top")}}function click(event){_isMouseDown=!1,_body.removeEventListener("mousemove",nodeMouseMove),_body.removeEventListener("mouseup",nodeMouseUp),_hoverStack.length||(_node=null)}function nodeMouseOver(event){_hoverIndex[event.data.node.id]||(_hoverStack.push(event.data.node),_hoverIndex[event.data.node.id]=!0,_hoverStack.length&&!_isMouseDown&&(_node=_hoverStack[_hoverStack.length-1],_mouse.addEventListener("mousedown",nodeMouseDown)))}function treatOutNode(event){var indexCheck=_hoverStack.map(function(e){return e}).indexOf(event.data.node);_hoverStack.splice(indexCheck,1),delete _hoverIndex[event.data.node.id],_hoverStack.length&&!_isMouseDown?_node=_hoverStack[_hoverStack.length-1]:_mouse.removeEventListener("mousedown",nodeMouseDown)}function nodeMouseDown(event){_isMouseDown=!0;var size=_s.graph.nodes().length;if(_node&&size>1){_mouse.removeEventListener("mousedown",nodeMouseDown),_body.addEventListener("mousemove",nodeMouseMove),_body.addEventListener("mouseup",nodeMouseUp);var k,c;for(k in _s.cameras)c=_s.cameras[k],void 0!==c.edgequadtree&&(c.edgequadtree._enabled=!1);_renderer.settings({mouseEnabled:!1,enableHovering:!1}),_s.refresh(),_self.dispatchEvent("startdrag",{node:_node,captor:event,renderer:_renderer})}}function nodeMouseUp(event){_isMouseDown=!1,_mouse.addEventListener("mousedown",nodeMouseDown),_body.removeEventListener("mousemove",nodeMouseMove),_body.removeEventListener("mouseup",nodeMouseUp);var k,c;for(k in _s.cameras)c=_s.cameras[k],void 0!==c.edgequadtree&&(c.edgequadtree._enabled=!0);_renderer.settings({mouseEnabled:!0,enableHovering:!0}),_s.refresh(),_drag&&_self.dispatchEvent("drop",{node:_node,captor:event,renderer:_renderer}),_self.dispatchEvent("dragend",{node:_node,captor:event,renderer:_renderer}),_drag=!1,_node=null}function nodeMouseMove(event){function executeNodeMouseMove(){for(var offset=calculateOffset(_renderer.container),x=event.clientX-offset.left,y=event.clientY-offset.top,cos=Math.cos(_camera.angle),sin=Math.sin(_camera.angle),nodes=_s.graph.nodes(),ref=[],i=0;i<2;i++){var n=nodes[i],aux={x:n.x*cos+n.y*sin,y:n.y*cos-n.x*sin,renX:n[_prefix+"x"],renY:n[_prefix+"y"]};ref.push(aux)}if(ref[0].x===ref[1].x&&ref[0].y===ref[1].y){var xRatio=0===ref[0].renX?1:ref[0].renX,yRatio=0===ref[0].renY?1:ref[0].renY;x=ref[0].x/xRatio*(x-ref[0].renX)+ref[0].x,y=ref[0].y/yRatio*(y-ref[0].renY)+ref[0].y}else{var xRatio=(ref[1].renX-ref[0].renX)/(ref[1].x-ref[0].x),yRatio=(ref[1].renY-ref[0].renY)/(ref[1].y-ref[0].y);ref[1].x===ref[0].x&&(xRatio=yRatio),ref[1].y===ref[0].y&&(yRatio=xRatio),x=(x-ref[0].renX)/xRatio+ref[0].x,y=(y-ref[0].renY)/yRatio+ref[0].y}_node.x=x*cos-y*sin,_node.y=y*cos+x*sin,_s.refresh(),_drag=!0,_self.dispatchEvent("drag",{node:_node,captor:event,renderer:_renderer})}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){clearTimeout(timeOut);var timeOut=setTimeout(executeNodeMouseMove,0)}else executeNodeMouseMove()}sigma.classes.dispatcher.extend(this);var _self=this,_s=s,_body=document.body,_renderer=renderer,_mouse=renderer.container.lastChild,_camera=renderer.camera,_node=null,_prefix="",_hoverStack=[],_hoverIndex={},_isMouseDown=!1,_isMouseOverCanvas=!1,_drag=!1;renderer instanceof sigma.renderers.svg&&(_mouse=renderer.container.firstChild),_prefix=renderer instanceof sigma.renderers.webgl?renderer.options.prefix.substr(5):renderer.options.prefix,renderer.bind("overNode",nodeMouseOver),renderer.bind("outNode",treatOutNode),renderer.bind("click",click),_s.bind("kill",function(){_self.unbindAll()}),this.unbindAll=function(){_mouse.removeEventListener("mousedown",nodeMouseDown),_body.removeEventListener("mousemove",nodeMouseMove),_body.removeEventListener("mouseup",nodeMouseUp),_renderer.unbind("overNode",nodeMouseOver),_renderer.unbind("outNode",treatOutNode)}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var _instance={};sigma.plugins.dragNodes=function(s,renderer){return _instance[s.id]||(_instance[s.id]=new DragNodes(s,renderer)),s.bind("kill",function(){sigma.plugins.killDragNodes(s)}),_instance[s.id]},sigma.plugins.killDragNodes=function(s){_instance[s.id]instanceof DragNodes&&(_instance[s.id].unbindAll(),delete _instance[s.id])}}).call(window);
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",launch:function(){this.add(Ext.create("Ext.panel.Panel",{html:'<div id="graph-container"></div>',listeners:{afterrender:function(cmp){console.log("asdgf"),this._build()},scope:this}}))},_build:function(){var i,s,N=100,E=500,g={nodes:[],edges:[]};for(i=0;i<N;i++)g.nodes.push({id:"n"+i,label:"Node "+i,x:Math.random(),y:Math.random(),size:Math.random(),color:"#666"});for(i=0;i<E;i++)g.edges.push({id:"e"+i,source:"n"+(Math.random()*N|0),target:"n"+(Math.random()*N|0),size:Math.random(),color:"#ccc"});s=new sigma({graph:g,container:"graph-container"});var dragListener=sigma.plugins.dragNodes(s,s.renderers[0]);dragListener.bind("startdrag",function(event){console.log(event)}),dragListener.bind("drag",function(event){console.log(event)}),dragListener.bind("drop",function(event){console.log(event)}),dragListener.bind("dragend",function(event){console.log(event)})}});

            Rally.launchApp('CustomApp', {
                name:"nodes",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        #graph-container{top:0;bottom:0;left:0;right:0;position:absolute}#sidebar{bottom:0;right:0;width:200px;height:150px;position:absolute;background-color:#999;padding:10px}
    </style>
</head>
<body>
    
</body>
</html>
